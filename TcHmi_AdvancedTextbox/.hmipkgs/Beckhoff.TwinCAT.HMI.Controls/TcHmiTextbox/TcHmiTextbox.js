var TcHmi,__extends=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();!function(t){!function(e){!function(e){var o=function(e){function o(o,n,i){var r=e.call(this,o,n,i)||this;return r.__locked=!1,r.__triggerUIFinishedOnBlur=!0,r.__onKeydown=function(e){!0===t.Access.checkAccess(r,"operate")&&!1!==r.getIsEnabled()&&(r.__triggerUIFinishedOnBlur=!0,"Escape"===e.key?(r.__setText(r.__oldText),t.EventProvider.raise(r.__id+".onUserInteractionCanceled"),r.__triggerUIFinishedOnBlur=!1,r.__autoFocusOut&&r.__elementInput.blur()):"Enter"!==e.key||r.__multiline||(r.__oldText=r.__text,r.__triggerUIFinishedOnBlur=!1,r.__autoFocusOut&&(r.__elementInput.blur(),r.__unlock()),t.EventProvider.raise(r.__id+".onUserInteractionFinished"),e.preventDefault()))},r.__onInput=function(e){!0===t.Access.checkAccess(r,"operate")&&!1!==r.getIsEnabled()&&(r.__triggerUIFinishedOnBlur=!0,r.__setText(r.__elementInput.val(),!1))},r.__onPaste=function(e){!0===t.System.Services.accessManager.checkAccess(r,"operate")&&!1!==r.getIsEnabled()&&(r.__triggerUIFinishedOnBlur=!0,window.setTimeout(function(){r.__setText(r.__elementInput.val(),!1)},1))},r.__onCut=function(e){!0===t.Access.checkAccess(r,"operate")&&!1!==r.getIsEnabled()&&(r.__triggerUIFinishedOnBlur=!0,window.setTimeout(function(){r.__setText(r.__elementInput.val(),!1)},1))},r.__onFocusIn=function(e){!0===t.Access.checkAccess(r,"operate")&&!1!==r.getIsEnabled()&&(r.__triggerUIFinishedOnBlur=!0,r.__oldText=r.__text,r.__elementFocusBorder[0].classList.add("tchmi-focus"),t.EventProvider.raise(r.__id+".onFocusIn",e),r.__elementInput[0]===document.activeElement&&r.__lock())},r.__onFocusOut=function(e){!0===t.Access.checkAccess(r,"operate")&&!1!==r.getIsEnabled()&&(r.__unlock(),r.__elementFocusBorder[0].classList.remove("tchmi-focus"),t.EventProvider.raise(r.__id+".onFocusOut",e),r.__oldText=r.__text,r.__triggerUIFinishedOnBlur&&t.EventProvider.raise(r.__id+".onUserInteractionFinished"),r.__triggerUIFinishedOnBlur=!0)},r.__onResolverForContentPaddingWatchCallback=function(e){!1===r.__isAttached&&r.__suspendObjectResolver("contentPadding"),e.error===t.Errors.NONE?tchmi_equal(e.value,r.__contentPadding)||(r.__contentPadding=e.value,t.EventProvider.raise(r.__id+".onFunctionResultChanged",["getContentPadding"]),r.__processContentPadding()):t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTextbox, Id="+r.getId()+", Attribute=ContentPadding] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},r.__onResolverForTextColorWatchCallback=function(e){!1===r.__isAttached&&r.__suspendObjectResolver("textColor"),e.error===t.Errors.NONE?tchmi_equal(e.value,r.__textColor)||(r.__textColor=e.value,t.EventProvider.raise(r.__id+".onFunctionResultChanged",["getTextColor"]),r.__processTextColor()):t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTextbox, Id="+r.getId()+", Attribute=TextColor] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},r}return __extends(o,e),o.prototype.__previnit=function(){if(this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_Beckhoff_TcHmiTextbox-template"),0===this.__elementTemplateRoot.length&&(this.__elementTemplateRoot=this.__element.find(".tchmi-textbox-template")),this.__elementBorder=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTextbox-template-border"),0===this.__elementBorder.length&&(this.__elementBorder=this.__elementTemplateRoot.find(".tchmi-textbox-template-border")),this.__elementContainer=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTextbox-template-input-container"),0===this.__elementContainer.length&&(this.__elementContainer=this.__elementTemplateRoot.find(".tchmi-textbox-template-input-container")),this.__elementFocusBorder=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTextbox-template-focus-border"),0===this.__elementFocusBorder.length&&(this.__elementFocusBorder=this.__elementTemplateRoot.find(".tchmi-textbox-template-focus-border")),0===this.__elementTemplateRoot.length||0===this.__elementBorder.length||0===this.__elementContainer.length||0===this.__elementFocusBorder.length)throw new Error("Invalid Template.html");var t=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTextbox-template-input");t.length&&(this.__elementInput=t),e.prototype.__previnit.call(this)},o.prototype.__init=function(){e.prototype.__init.call(this);var t=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1},o=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!1,capture:!1};this.__elementTemplateRoot[0].addEventListener("focusin",this.__onFocusIn,t),this.__elementTemplateRoot[0].addEventListener("focusout",this.__onFocusOut,t),this.__elementContainer[0].addEventListener("keydown",this.__onKeydown,o),this.__elementContainer[0].addEventListener("input",this.__onInput,t),this.__elementContainer[0].addEventListener("paste",this.__onPaste,t),this.__elementContainer[0].addEventListener("cut",this.__onCut,t)},o.prototype.__attach=function(){e.prototype.__attach.call(this)},o.prototype.__detach=function(){e.prototype.__detach.call(this)},o.prototype.destroy=function(){if(!this.__keepAlive){var t=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1},o=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!1,capture:!1};this.__elementTemplateRoot[0].removeEventListener("focusin",this.__onFocusIn,t),this.__elementTemplateRoot[0].removeEventListener("focusout",this.__onFocusOut,t),this.__elementContainer[0].removeEventListener("keydown",this.__onKeydown,o),this.__elementContainer[0].removeEventListener("input",this.__onInput,t),this.__elementContainer[0].removeEventListener("paste",this.__onPaste,t),this.__elementContainer[0].removeEventListener("cut",this.__onCut,t),e.prototype.destroy.call(this)}},o.prototype.setText=function(valueNew){!0!==this.__locked&&this.__setText(valueNew)},o.prototype.__setText=function(valueNew,e){void 0===e&&(e=!0);var o=t.ValueConverter.toString(valueNew);null===o&&(o=this.getAttributeDefaultValueInternal("Text")),o!==this.__text&&(this.__text=o,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getText"]),t.EventProvider.raise(this.__id+".onTextChanged",this.__text),e&&this.__processText())},o.prototype.getText=function(){return this.__text},o.prototype.__processText=function(){var t;if(void 0!==this.__text&&this.__elementInput){var text=null!=(t=this.__text)?t:"";this.__multiline||(text=this.__text.replace(/(?:\r\n|\r|\n)/g," ")),this.__elementInput[0].value=text}},o.prototype.setTextHorizontalAlignment=function(valueNew){var e=t.ValueConverter.toHorizontalAlignment(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TextHorizontalAlignment")),e!==this.__textHorizontalAlignment&&(this.__textHorizontalAlignment=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getTextHorizontalAlignment"]),this.__processTextHorizontalAlignment())},o.prototype.getTextHorizontalAlignment=function(){return this.__textHorizontalAlignment},o.prototype.__processTextHorizontalAlignment=function(){switch(this.__textHorizontalAlignment){case"Left":t.StyleProvider.setSimpleElementStyle(this.__elementContainer,"text-align","left");break;case"Center":t.StyleProvider.setSimpleElementStyle(this.__elementContainer,"text-align","center");break;case"Right":t.StyleProvider.setSimpleElementStyle(this.__elementContainer,"text-align","right");break;default:t.StyleProvider.setSimpleElementStyle(this.__elementContainer,"text-align",null)}},o.prototype.setContentPadding=function(valueNew){var e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("ContentPadding"));var o=this.__objectResolvers.get("contentPadding");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("contentPadding",{resolver:n,watchCallback:this.__onResolverForContentPaddingWatchCallback,watchDestroyer:n.watch(this.__onResolverForContentPaddingWatchCallback)})},o.prototype.getContentPadding=function(){return this.__contentPadding},o.prototype.__processContentPadding=function(){this.__elementInput&&t.StyleProvider.processContentPadding(this.__elementInput,this.__contentPadding)},o.prototype.setTextFontSize=function(valueNew){var e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TextFontSize")),e!==this.__textFontSize&&(this.__textFontSize=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getTextFontSize"]),this.__processTextFontSize())},o.prototype.getTextFontSize=function(){return this.__textFontSize},o.prototype.__processTextFontSize=function(){t.StyleProvider.processFontSize(this.__elementContainer,this.__textFontSize,this.__textFontSizeUnit)},o.prototype.setTextFontSizeUnit=function(valueNew){var e=t.ValueConverter.toFontSizeUnit(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TextFontSizeUnit")),e!==this.__textFontSizeUnit&&(this.__textFontSizeUnit=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getTextFontSizeUnit"]),this.__processTextFontSizeUnit())},o.prototype.getTextFontSizeUnit=function(){return this.__textFontSizeUnit},o.prototype.__processTextFontSizeUnit=function(){t.StyleProvider.processFontSize(this.__elementContainer,this.__textFontSize,this.__textFontSizeUnit)},o.prototype.setTextFontFamily=function(valueNew){var e=t.ValueConverter.toFontFamily(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TextFontFamily")),e!==this.__textFontFamily&&(this.__textFontFamily=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getTextFontFamily"]),this.__processTextFontFamily())},o.prototype.getTextFontFamily=function(){return this.__textFontFamily},o.prototype.__processTextFontFamily=function(){t.StyleProvider.processFontFamily(this.__elementContainer,this.__textFontFamily)},o.prototype.setTextFontStyle=function(valueNew){var e=t.ValueConverter.toFontStyle(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TextFontStyle")),e!==this.__textFontStyle&&(this.__textFontStyle=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getTextFontStyle"]),this.__processTextFontStyle())},o.prototype.getTextFontStyle=function(){return this.__textFontStyle},o.prototype.__processTextFontStyle=function(){t.StyleProvider.processFontStyle(this.__elementContainer,this.__textFontStyle)},o.prototype.setTextFontWeight=function(valueNew){var e=t.ValueConverter.toFontWeight(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TextFontWeight")),e!==this.__textFontWeight&&(this.__textFontWeight=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getTextFontWeight"]),this.__processTextFontWeight())},o.prototype.getTextFontWeight=function(){return this.__textFontWeight},o.prototype.__processTextFontWeight=function(){t.StyleProvider.processFontWeight(this.__elementContainer,this.__textFontWeight)},o.prototype.setMultiline=function(valueNew){var e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("Multiline")),e!==this.__multiline&&(this.__multiline=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getMultiline"]),this.__processMultiline())},o.prototype.getMultiline=function(){return this.__multiline},o.prototype.__processMultiline=function(){if(!0===this.__multiline){if(void 0===this.__elementInput||"TEXTAREA"!==this.__elementInput[0].tagName){var t=this.__elementInput;this.__elementInput=$('<textarea class="TcHmi_Controls_Beckhoff_TcHmiTextbox-template-input tchmi-textbox-template-input" wrap="off" spellcheck="false"></textarea>'),this.__processWordWrap(),this.__processText(),this.__processContentPadding(),this.__processPlaceholder(),t?t.replaceWith(this.__elementInput):this.__elementContainer.append(this.__elementInput)}}else if(void 0===this.__elementInput||"INPUT"!==this.__elementInput[0].tagName){t=this.__elementInput;this.__elementInput=$('<input class="TcHmi_Controls_Beckhoff_TcHmiTextbox-template-input tchmi-textbox-template-input" spellcheck="false" />'),this.__processWordWrap(),this.__processText(),this.__processContentPadding(),this.__processPlaceholder(),t?t.replaceWith(this.__elementInput):this.__elementContainer.append(this.__elementInput)}},o.prototype.setWordWrap=function(valueNew){var e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("WordWrap")),e!==this.__wordWrap&&(this.__wordWrap=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getWordWrap"]),this.__processWordWrap())},o.prototype.getWordWrap=function(){return this.__wordWrap},o.prototype.__processWordWrap=function(){this.__elementInput&&(this.__wordWrap?(t.StyleProvider.setSimpleElementStyle(this.__elementInput,{"white-space":"pre-wrap","word-wrap":"break-word","overflow-wrap":"break-word"}),this.__elementInput[0].setAttribute("wrap","on")):(t.StyleProvider.setSimpleElementStyle(this.__elementInput,{"white-space":null,"word-wrap":null,"overflow-wrap":null}),this.__elementInput[0].setAttribute("wrap","off")))},o.prototype.setPlaceholder=function(valueNew){var e=t.ValueConverter.toString(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("Placeholder")),e!==this.__placeholder&&(this.__placeholder=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getPlaceholder"]),this.__processPlaceholder())},o.prototype.getPlaceholder=function(){return this.__placeholder},o.prototype.__processPlaceholder=function(){this.__elementInput&&(this.__placeholder?this.__elementInput[0].setAttribute("placeholder",this.__placeholder):this.__elementInput[0].removeAttribute("placeholder"))},o.prototype.setTextColor=function(valueNew){var e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TextColor"));var o=this.__objectResolvers.get("textColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("textColor",{resolver:n,watchCallback:this.__onResolverForTextColorWatchCallback,watchDestroyer:n.watch(this.__onResolverForTextColorWatchCallback)})},o.prototype.getTextColor=function(){return this.__textColor},o.prototype.__processTextColor=function(){t.StyleProvider.processTextColor(this.__elementContainer,this.__textColor)},o.prototype.setAutoFocusOut=function(valueNew){var e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("AutoFocusOut")),e!==this.__autoFocusOut&&(this.__autoFocusOut=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getAutoFocusOut"]),this.__processAutoFocusOut())},o.prototype.getAutoFocusOut=function(){return this.__autoFocusOut},o.prototype.__processAutoFocusOut=function(){},o.prototype.__lock=function(){this.__locked=!0},o.prototype.__unlock=function(){this.__locked=!1},o.prototype.__processControlActivation=function(){if(this.__elementInput){var e=this.__elementInput[0];t.System.Services.accessManager.checkAccess(this,"operate")&&this.getIsEnabled()?e.disabled=!1:(e.blur(),e.disabled=!0)}},o.prototype.__processIsEnabled=function(){e.prototype.__processIsEnabled.call(this),this.__processControlActivation()},o.prototype.__processAccessConfig=function(){e.prototype.__processAccessConfig.call(this),this.__processControlActivation()},o}(t.Controls.System.TcHmiControl);e.TcHmiTextbox=o}(e.Beckhoff||(e.Beckhoff={})),e.registerEx("TcHmiTextbox","TcHmi.Controls.Beckhoff",t.Controls.Beckhoff.TcHmiTextbox)}(t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));