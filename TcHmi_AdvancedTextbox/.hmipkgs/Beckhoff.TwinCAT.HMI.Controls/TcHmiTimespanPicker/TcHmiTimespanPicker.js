var TcHmi,__extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();!function(e){!function(t){!function(t){var n=function(t){function n(e,n,o){var i=t.call(this,e,n,o)||this;return i.__onMousedownYearUpDestroyEvent=null,i.__onMousedownYearDownDestroyEvent=null,i.__onMousedownMonthUpDestroyEvent=null,i.__onMousedownMonthDownDestroyEvent=null,i.__onMousedownDayUpDestroyEvent=null,i.__onMousedownDayDownDestroyEvent=null,i.__onMousedownHourUpDestroyEvent=null,i.__onMousedownHourDownDestroyEvent=null,i.__onMousedownMinuteUpDestroyEvent=null,i.__onMousedownMinuteDownDestroyEvent=null,i.__onMousedownSecondUpDestroyEvent=null,i.__onMousedownSecondDownDestroyEvent=null,i.__onMousedownMillisecondUpDestroyEvent=null,i.__onMousedownMillisecondDownDestroyEvent=null,i.__onPressedOkDestroyEvent=null,i.__onPressedCancelDestroyEvent=null,i.__onTextChangedYearDestroyEvent=null,i.__onTextChangedMonthDestroyEvent=null,i.__onTextChangedDayDestroyEvent=null,i.__onTextChangedHourDestroyEvent=null,i.__onTextChangedMinuteDestroyEvent=null,i.__onTextChangedSecondDestroyEvent=null,i.__onTextChangedMillisecondDestroyEvent=null,i.__onUserInteractionFinishedYearDestroyEvent=null,i.__onUserInteractionFinishedMonthDestroyEvent=null,i.__onUserInteractionFinishedDayDestroyEvent=null,i.__onUserInteractionFinishedHourDestroyEvent=null,i.__onUserInteractionFinishedMinuteDestroyEvent=null,i.__onUserInteractionFinishedSecondDestroyEvent=null,i.__onUserInteractionFinishedMillisecondDestroyEvent=null,i.__baseControls={},i.__isPressed=!1,i.__intervalTimer=0,i.__mousedownHandler=i.__onMousedown(),i.__mouseupHandler=i.__onMouseup(),i}return __extends(n,t),n.prototype.__previnit=function(){this.__elementTSTemplate=$('<div class="TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-overlay tchmi-timespan-picker-template-overlay tchmi-box"></div>'),this.__elementTSFirstBlockTemplate=$('<div class="TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-first-block tchmi-timespan-picker-template-first-block tchmi-box"></div>'),this.__elementTSSecondBlockTemplate=$('<div class="TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-second-block tchmi-timespan-picker-template-template-second-block tchmi-box"></div>');var n=$('<div class="TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-year-template tchmi-timespan-picker-year-template TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-editable-area tchmi-timespan-picker-template-editable-area"></div>'),o=this.__addControls("Year","0000");n.append(o),this.__elementTSFirstBlockTemplate.append(n);var i=$('<div class="TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-month-template tchmi-timespan-picker-month-template TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-editable-area tchmi-timespan-picker-editable-area"></div>'),s=this.__addControls("Month","00");i.append(s),this.__elementTSFirstBlockTemplate.append(i);var r=$('<div class="TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-day-template tchmi-timespan-picker-day-template TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-editable-area tchmi-timespan-picker-template-editable-area"></div>');r.append(this.__addControls("Day","00")),this.__elementTSFirstBlockTemplate.append(r);var _=$('<div class="TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-hour-template tchmi-timespan-picker-hour-template TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-editable-area tchmi-timespan-template-editable-area"></div>');_.append(this.__addControls("Hour","00")),this.__elementTSSecondBlockTemplate.append(_);var a=$('<div class="TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-minute-template tchmi-timespan-picker-minute-template TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-editable-area tchmi-timespan-picker-template-editable-area"></div>');a.append(this.__addControls("Minute","00")),this.__elementTSSecondBlockTemplate.append(a);var l=$('<div class="TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-second-template tchmi-timespan-picker-second-template TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-editable-area tchmi-timespan-picker-template-editable-area"></div>');l.append(this.__addControls("Second","00")),this.__elementTSSecondBlockTemplate.append(l);var c=$('<div class="TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-millisecond-template tchmi-timespan-picker-millisecond-template TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-editable-area tchmi-timespan-picker-template-editable-area"></div>'),d=this.__addControls("Millisecond","000");d.firstChild.style.width="70px",c.append(d),this.__elementTSTemplate[0].appendChild(this.__elementTSFirstBlockTemplate[0]),this.__elementTSTemplate[0].appendChild(this.__elementTSSecondBlockTemplate[0]),this.__elementTSTemplate[0].appendChild(c[0]);var m=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_cancelButton",{"data-tchmi-text":"Cancel"},this);if(void 0===m)throw new Error("Needed Button could not be instantiated");m.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-action-button","tchmi-timespan-picker-template-action-button"),this.__elementTSTemplate[0].appendChild(m.getElement()[0]),m.getElement()[0].style.clear="both",this.__baseControls[this.__id+"_cancelButton"]=m;var h=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_okButton",{"data-tchmi-text":"Ok"},this);if(void 0===h)throw new Error("Needed Button could not be instantiated");h.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-action-button","tchmi-timespan-picker-template-action-button"),this.__elementTSTemplate[0].appendChild(h.getElement()[0]),this.__baseControls[this.__id+"_okButton"]=h,t.prototype.__previnit.call(this)},n.prototype.__init=function(){t.prototype.__init.call(this);this.__element[0].addEventListener("mousedown",this.__mousedownHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1})},n.prototype.__attach=function(){t.prototype.__attach.call(this);document.addEventListener("mouseup",this.__mouseupHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1}),this.__onMousedownYearUpDestroyEvent=e.EventProvider.register(this.__id+"_yearUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownYearDownDestroyEvent=e.EventProvider.register(this.__id+"_yearDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMonthUpDestroyEvent=e.EventProvider.register(this.__id+"_monthUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMonthDownDestroyEvent=e.EventProvider.register(this.__id+"_monthDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownDayUpDestroyEvent=e.EventProvider.register(this.__id+"_dayUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownDayDownDestroyEvent=e.EventProvider.register(this.__id+"_dayDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownHourUpDestroyEvent=e.EventProvider.register(this.__id+"_hourUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownHourDownDestroyEvent=e.EventProvider.register(this.__id+"_hourDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMinuteUpDestroyEvent=e.EventProvider.register(this.__id+"_minuteUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMinuteDownDestroyEvent=e.EventProvider.register(this.__id+"_minuteDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownSecondUpDestroyEvent=e.EventProvider.register(this.__id+"_secondUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownSecondDownDestroyEvent=e.EventProvider.register(this.__id+"_secondDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMillisecondUpDestroyEvent=e.EventProvider.register(this.__id+"_millisecondUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMillisecondDownDestroyEvent=e.EventProvider.register(this.__id+"_millisecondDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onPressedOkDestroyEvent=e.EventProvider.register(this.__id+"_okButton.onPressed",this.__onPressed()),this.__onPressedCancelDestroyEvent=e.EventProvider.register(this.__id+"_cancelButton.onPressed",this.__onPressed()),this.__onTextChangedYearDestroyEvent=e.EventProvider.register(this.__id+"_yearValueTextbox.onTextChanged",this.__onTextChanged()),this.__onTextChangedMonthDestroyEvent=e.EventProvider.register(this.__id+"_monthValueTextbox.onTextChanged",this.__onTextChanged()),this.__onTextChangedDayDestroyEvent=e.EventProvider.register(this.__id+"_dayValueTextbox.onTextChanged",this.__onTextChanged()),this.__onTextChangedHourDestroyEvent=e.EventProvider.register(this.__id+"_hourValueTextbox.onTextChanged",this.__onTextChanged()),this.__onTextChangedMinuteDestroyEvent=e.EventProvider.register(this.__id+"_minuteValueTextbox.onTextChanged",this.__onTextChanged()),this.__onTextChangedSecondDestroyEvent=e.EventProvider.register(this.__id+"_secondValueTextbox.onTextChanged",this.__onTextChanged()),this.__onTextChangedMillisecondDestroyEvent=e.EventProvider.register(this.__id+"_millisecondValueTextbox.onTextChanged",this.__onTextChanged()),this.__onUserInteractionFinishedYearDestroyEvent=e.EventProvider.register(this.__id+"_yearValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedMonthDestroyEvent=e.EventProvider.register(this.__id+"_monthValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedDayDestroyEvent=e.EventProvider.register(this.__id+"_dayValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedHourDestroyEvent=e.EventProvider.register(this.__id+"_hourValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedMinuteDestroyEvent=e.EventProvider.register(this.__id+"_minuteValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedSecondDestroyEvent=e.EventProvider.register(this.__id+"_secondValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedMillisecondDestroyEvent=e.EventProvider.register(this.__id+"_millisecondValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished())},n.prototype.__detach=function(){t.prototype.__detach.call(this),this.__intervalTimer&&(clearInterval(this.__intervalTimer),this.__intervalTimer=0);document.removeEventListener("mouseup",this.__mouseupHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1}),null!==this.__onMousedownYearUpDestroyEvent&&(this.__onMousedownYearUpDestroyEvent(),this.__onMousedownYearUpDestroyEvent=null),null!==this.__onMousedownYearDownDestroyEvent&&(this.__onMousedownYearDownDestroyEvent(),this.__onMousedownYearDownDestroyEvent=null),null!==this.__onMousedownMonthUpDestroyEvent&&(this.__onMousedownMonthUpDestroyEvent(),this.__onMousedownMonthUpDestroyEvent=null),null!==this.__onMousedownMonthDownDestroyEvent&&(this.__onMousedownMonthDownDestroyEvent(),this.__onMousedownMonthDownDestroyEvent=null),null!==this.__onMousedownDayUpDestroyEvent&&(this.__onMousedownDayUpDestroyEvent(),this.__onMousedownDayUpDestroyEvent=null),null!==this.__onMousedownDayDownDestroyEvent&&(this.__onMousedownDayDownDestroyEvent(),this.__onMousedownDayDownDestroyEvent=null),null!==this.__onMousedownHourUpDestroyEvent&&(this.__onMousedownHourUpDestroyEvent(),this.__onMousedownHourUpDestroyEvent=null),null!==this.__onMousedownHourDownDestroyEvent&&(this.__onMousedownHourDownDestroyEvent(),this.__onMousedownHourDownDestroyEvent=null),null!==this.__onMousedownMinuteUpDestroyEvent&&(this.__onMousedownMinuteUpDestroyEvent(),this.__onMousedownMinuteUpDestroyEvent=null),null!==this.__onMousedownMinuteDownDestroyEvent&&(this.__onMousedownMinuteDownDestroyEvent(),this.__onMousedownMinuteDownDestroyEvent=null),null!==this.__onMousedownSecondUpDestroyEvent&&(this.__onMousedownSecondUpDestroyEvent(),this.__onMousedownSecondUpDestroyEvent=null),null!==this.__onMousedownSecondDownDestroyEvent&&(this.__onMousedownSecondDownDestroyEvent(),this.__onMousedownSecondDownDestroyEvent=null),null!==this.__onMousedownMillisecondUpDestroyEvent&&(this.__onMousedownMillisecondUpDestroyEvent(),this.__onMousedownMillisecondUpDestroyEvent=null),null!==this.__onMousedownMillisecondDownDestroyEvent&&(this.__onMousedownMillisecondDownDestroyEvent(),this.__onMousedownMillisecondDownDestroyEvent=null),null!==this.__onPressedOkDestroyEvent&&(this.__onPressedOkDestroyEvent(),this.__onPressedOkDestroyEvent=null),null!==this.__onPressedCancelDestroyEvent&&(this.__onPressedCancelDestroyEvent(),this.__onPressedCancelDestroyEvent=null),null!==this.__onTextChangedYearDestroyEvent&&(this.__onTextChangedYearDestroyEvent(),this.__onTextChangedYearDestroyEvent=null),null!==this.__onTextChangedMonthDestroyEvent&&(this.__onTextChangedMonthDestroyEvent(),this.__onTextChangedMonthDestroyEvent=null),null!==this.__onTextChangedDayDestroyEvent&&(this.__onTextChangedDayDestroyEvent(),this.__onTextChangedDayDestroyEvent=null),null!==this.__onTextChangedHourDestroyEvent&&(this.__onTextChangedHourDestroyEvent(),this.__onTextChangedHourDestroyEvent=null),null!==this.__onTextChangedMinuteDestroyEvent&&(this.__onTextChangedMinuteDestroyEvent(),this.__onTextChangedMinuteDestroyEvent=null),null!==this.__onTextChangedSecondDestroyEvent&&(this.__onTextChangedSecondDestroyEvent(),this.__onTextChangedSecondDestroyEvent=null),null!==this.__onTextChangedMillisecondDestroyEvent&&(this.__onTextChangedMillisecondDestroyEvent(),this.__onTextChangedMillisecondDestroyEvent=null),null!==this.__onUserInteractionFinishedYearDestroyEvent&&(this.__onUserInteractionFinishedYearDestroyEvent(),this.__onUserInteractionFinishedYearDestroyEvent=null),null!==this.__onUserInteractionFinishedMonthDestroyEvent&&(this.__onUserInteractionFinishedMonthDestroyEvent(),this.__onUserInteractionFinishedMonthDestroyEvent=null),null!==this.__onUserInteractionFinishedDayDestroyEvent&&(this.__onUserInteractionFinishedDayDestroyEvent(),this.__onUserInteractionFinishedDayDestroyEvent=null),null!==this.__onUserInteractionFinishedHourDestroyEvent&&(this.__onUserInteractionFinishedHourDestroyEvent(),this.__onUserInteractionFinishedHourDestroyEvent=null),null!==this.__onUserInteractionFinishedMinuteDestroyEvent&&(this.__onUserInteractionFinishedMinuteDestroyEvent(),this.__onUserInteractionFinishedMinuteDestroyEvent=null),null!==this.__onUserInteractionFinishedSecondDestroyEvent&&(this.__onUserInteractionFinishedSecondDestroyEvent(),this.__onUserInteractionFinishedSecondDestroyEvent=null),null!==this.__onUserInteractionFinishedMillisecondDestroyEvent&&(this.__onUserInteractionFinishedMillisecondDestroyEvent(),this.__onUserInteractionFinishedMillisecondDestroyEvent=null)},n.prototype.destroy=function(){if(!this.__keepAlive){this.__element[0].removeEventListener("mousedown",this.__mousedownHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1}),t.prototype.destroy.call(this)}},n.prototype.__addControls=function(t,n){var o=document.createDocumentFragment(),i=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextblock",this.__id+"_"+t.toLowerCase()+"Label",{"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-text-vertical-alignment":"Center","data-tchmi-text-font-size":15,"data-tchmi-text":t},this);if(void 0===i)throw new Error("Needed Textblock could not be instantiated");i.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-label","tchmi-timespan-picker-template-label"),o.appendChild(i.getElement()[0]);var s=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_"+t.toLowerCase()+"UpButton",{"data-tchmi-zindex":1},this);if(void 0===s)throw new Error("Needed Button could not be instantiated");s.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-button","TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-up-button","tchmi-timespan-picker-template-button","tchmi-timespan-picker-template-up-button"),o.appendChild(s.getElement()[0]),this.__baseControls[this.__id+"_"+t.toLowerCase()+"UpButton"]=s;var r=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextbox",this.__id+"_"+t.toLowerCase()+"ValueTextbox",{"data-tchmi-text":n,"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-box-shadow":[{blur:5,blurUnit:"px",color:{color:"rgba(0, 0, 0, 0.6)"},offsetX:0,offsetXUnit:"px",offsetY:0,offsetYUnit:"px",spread:0,spreadUnit:"px"}],"data-tchmi-auto-focus-out":!0},this);if(void 0===r)throw new Error("Needed Textbox could not be instantiated");r.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox","tchmi-timespan-picker-template-textbox"),o.appendChild(r.getElement()[0]),this.__baseControls[this.__id+"_"+t.toLowerCase()+"Value"]=r;var _=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_"+t.toLowerCase()+"DownButton",{},this);if(void 0===_)throw new Error("Needed Button could not be instantiated");return _.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-button","TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-down-button","tchmi-timespan-picker-template-button","tchmi-timespan-picker-template-down-button"),o.appendChild(_.getElement()[0]),this.__baseControls[this.__id+"_"+t.toLowerCase()+"DownButton"]=_,o},n.prototype.__timespanObjectToIso=function(e){var t="";return t+="P",e.years>0&&(t+=e.years+"Y"),e.months>0&&(t+=e.months+"M"),e.days>0&&(t+=e.days+"D"),(e.hours>0||e.minutes>0||e.seconds>0||e.milliseconds>0)&&(t+="T"),e.hours>0&&(t+=e.hours+"H"),e.minutes>0&&(t+=e.minutes+"M"),(e.seconds>0||0===e.years&&0===e.months&&0===e.days&&0===e.hours&&0===e.minutes)&&(t+=e.seconds),e.milliseconds>0&&(t+="."+("00"+e.milliseconds).slice(-3).replace(/\.?0+$/,"")),(e.milliseconds>0||e.seconds>0)&&(t+="S"),t},n.prototype.__isoToTimespanObject=function(e){for(var t={years:0,months:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0},n=0,o=0,i=0,s=0,r=0,_=0,a=!1,l=e.split(""),c=0,d=l.length;c<d;c++){for(var m=0,h="";l[c]>="0"&&l[c]<="9"||"."===l[c];)h+=l[c],c++,m=parseFloat(h);switch(l[c]){case"Y":_=m;break;case"D":s=m;break;case"T":a=!0;break;case"H":i=m;break;case"M":a?o=m:r=m;break;case"S":n=m}}t.years=_,t.months=r,t.days=s,t.hours=i,t.minutes=o;var p=n.toString().split(".");if(p.length>1){t.seconds=parseInt(p[0],10);var u=1e3*parseFloat("0."+p[1]);t.milliseconds=u}else t.seconds=parseInt(p[0],10),t.milliseconds=0;return t},n.prototype.__onMousedown=function(){var t=this;return function(n){t.getIsEnabled()&&e.Access.checkAccess(t,"operate")&&t.openTimespanPicker()}},n.prototype.openTimespanPicker=function(){var t=this;e.TopMostLayer.add(this,this.__elementTSTemplate,{centerHorizontal:!0,centerVertical:!0,removeCb:function(n){n.canceled&&(e.EventProvider.raise(t.__id+".onCancel"),t.__processValue())}})},n.prototype.closeTimespanPicker=function(){e.TopMostLayer.remove(this,this.__elementTSTemplate),e.EventProvider.raise(this.__id+".onCancel"),this.__processValue()},n.prototype.__onMousedownTimeButtons=function(){var e=this;return function(t){if(e.__isPressed=!0,-1!==t.name.search("yearUp")){if(void 0!==(H=e.__baseControls[e.__id+"_yearValue"])){var n=H;if(void 0!==(text=n.getText())){var o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var i=parseInt(text,10);i++,n.setText(i.toString()),e.__intervalTimer=setInterval(function(){e.__isPressed&&(i=parseInt(n.getText(),10),i++,n.setText(i.toString()))},150)}}}}else if(-1!==t.name.search("yearDown")){if(void 0!==(H=e.__baseControls[e.__id+"_yearValue"])){var s=H;if(void 0!==(text=s.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var r=parseInt(text,10);r>0&&(r--,s.setText(r.toString())),e.__intervalTimer=setInterval(function(){e.__isPressed&&(r=parseInt(s.getText(),10))>0&&(r--,s.setText(r.toString()))},150)}}}}else if(-1!==t.name.search("monthUp")){if(void 0!==(H=e.__baseControls[e.__id+"_monthValue"])){var _=H;if(void 0!==(text=_.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var a=parseInt(text,10);a++,_.setText(a.toString()),e.__intervalTimer=setInterval(function(){e.__isPressed&&(a=parseInt(_.getText(),10),a++,_.setText(a.toString()))},150)}}}}else if(-1!==t.name.search("monthDown")){if(void 0!==(H=e.__baseControls[e.__id+"_monthValue"])){var l=H;if(void 0!==(text=l.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var c=parseInt(text,10);c>0&&(c--,l.setText(c.toString())),e.__intervalTimer=setInterval(function(){e.__isPressed&&(c=parseInt(l.getText(),10))>0&&(c--,l.setText(c.toString()))},150)}}}}else if(-1!==t.name.search("dayUp")){if(void 0!==(H=e.__baseControls[e.__id+"_dayValue"])){var d=H;if(void 0!==(text=d.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var m=parseInt(text,10);m++,d.setText(m.toString()),e.__intervalTimer=setInterval(function(){e.__isPressed&&(m=parseInt(d.getText(),10),m++,d.setText(m.toString()))},150)}}}}else if(-1!==t.name.search("dayDown")){if(void 0!==(H=e.__baseControls[e.__id+"_dayValue"])){var h=H;if(void 0!==(text=h.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var p=parseInt(text,10);p>0&&(p--,h.setText(p.toString())),e.__intervalTimer=setInterval(function(){e.__isPressed&&(p=parseInt(h.getText(),10))>0&&(p--,h.setText(p.toString()))},150)}}}}else if(-1!==t.name.search("hourUp")){if(void 0!==(H=e.__baseControls[e.__id+"_hourValue"])){var u=H;if(void 0!==(text=u.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var v=parseInt(text,10);v++,u.setText(v.toString()),e.__intervalTimer=setInterval(function(){e.__isPressed&&(v=parseInt(u.getText(),10),v++,u.setText(v.toString()))},150)}}}}else if(-1!==t.name.search("hourDown")){if(void 0!==(H=e.__baseControls[e.__id+"_hourValue"])){var T=H;if(void 0!==(text=T.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var x=parseInt(text,10);x>0&&(x--,T.setText(x.toString())),e.__intervalTimer=setInterval(function(){e.__isPressed&&(x=parseInt(T.getText(),10))>0&&(x--,T.setText(x.toString()))},150)}}}}else if(-1!==t.name.search("minuteUp")){if(void 0!==(H=e.__baseControls[e.__id+"_minuteValue"])){var f=H;if(void 0!==(text=f.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var E=parseInt(text,10);E++,f.setText(E.toString()),e.__intervalTimer=setInterval(function(){e.__isPressed&&(E=parseInt(f.getText(),10),E++,f.setText(E.toString()))},150)}}}}else if(-1!==t.name.search("minuteDown")){if(void 0!==(H=e.__baseControls[e.__id+"_minuteValue"])){var y=H;if(void 0!==(text=y.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var g=parseInt(text,10);g>0&&(g--,y.setText(g.toString())),e.__intervalTimer=setInterval(function(){e.__isPressed&&(g=parseInt(y.getText(),10))>0&&(g--,y.setText(g.toString()))},150)}}}}else if(-1!==t.name.search("millisecondUp")){if(void 0!==(H=e.__baseControls[e.__id+"_millisecondValue"])){var D=H;if(void 0!==(text=D.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var C=parseInt(text,10);C<999&&(++C>=0?D.setText(("000"+C).substring(Math.min((""+C).length,3))):D.setText(C.toString())),e.__intervalTimer=setInterval(function(){e.__isPressed&&(C=parseInt(D.getText(),10))<999&&(++C>=0?D.setText(("000"+C).substring(Math.min((""+C).length,3))):D.setText(C.toString()))},150)}}}}else if(-1!==t.name.search("millisecondDown")){if(void 0!==(H=e.__baseControls[e.__id+"_millisecondValue"])){var b=H;if(void 0!==(text=b.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var k=parseInt(text,10);k>0&&(k--,b.setText(("000"+k).substring(Math.min((""+k).length,3)))),e.__intervalTimer=setInterval(function(){e.__isPressed&&(k=parseInt(b.getText(),10))>0&&(k--,b.setText(("000"+k).substring(Math.min((""+k).length,3))))},150)}}}}else if(-1!==t.name.search("secondUp")){if(void 0!==(H=e.__baseControls[e.__id+"_secondValue"])){var w=H;if(void 0!==(text=w.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var M=parseInt(text,10);M++,w.setText(M.toString()),e.__intervalTimer=setInterval(function(){e.__isPressed&&(M=parseInt(w.getText(),10),M++,w.setText(M.toString()))},150)}}}}else if(-1!==t.name.search("secondDown")){var H;if(void 0!==(H=e.__baseControls[e.__id+"_secondValue"])){var text,P=H;if(void 0!==(text=P.getText())){o=text.trim();if(new RegExp("^-?[0-9]*$").test(o)){var I=parseInt(text,10);I>0&&(I--,P.setText(I.toString())),e.__intervalTimer=setInterval(function(){e.__isPressed&&(I=parseInt(P.getText(),10))>0&&(I--,P.setText(I.toString()))},150)}}}}}},n.prototype.__onMouseup=function(){var e=this;return function(t){e.__isPressed=!1,e.__intervalTimer&&(clearInterval(e.__intervalTimer),e.__intervalTimer=0)}},n.prototype.__onPressed=function(){var t=this;return function(n){if(-1!==n.name.search("ok")){var o={years:0,months:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0},i=t.__baseControls[t.__id+"_yearValue"];if(void 0!==i){var s=i;o.years=parseInt(s.getText(),10)}var r=t.__baseControls[t.__id+"_monthValue"];if(void 0!==r){var _=r;o.months=parseInt(_.getText(),10)}var a=t.__baseControls[t.__id+"_dayValue"];if(void 0!==a){var l=a;o.days=parseInt(l.getText(),10)}var c=t.__baseControls[t.__id+"_hourValue"];if(void 0!==c){var d=c;o.hours=parseInt(d.getText(),10)}var m=t.__baseControls[t.__id+"_minuteValue"];if(void 0!==m){var h=m;o.minutes=parseInt(h.getText(),10)}var p=t.__baseControls[t.__id+"_secondValue"];if(void 0!==p){var u=p;o.seconds=parseInt(u.getText(),10)}var v=t.__baseControls[t.__id+"_millisecondValue"];if(void 0!==v){var T=v;o.milliseconds=parseInt(T.getText(),10)}var x=t.__timespanObjectToIso(o);t.setValue(x,!1),e.TopMostLayer.remove(t,t.__elementTSTemplate)}else-1!==n.name.search("cancel")&&(e.TopMostLayer.remove(t,t.__elementTSTemplate),e.EventProvider.raise(t.__id+".onCancel"),t.__processValue())}},n.prototype.__onTextChanged=function(){var e=this;return function(t){if(-1!==t.name.search("yearValueTextbox")){if(void 0!==(o=e.__baseControls[e.__id+"_yearValue"])&&void 0!==(text=(i=o).getText())){var n=text.trim();new RegExp("^[0-9]*$").test(n)?i.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):i.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error")}}else if(-1!==t.name.search("monthValueTextbox")){if(void 0!==(o=e.__baseControls[e.__id+"_monthValue"]))if(void 0!==(text=(i=o).getText())){n=text.trim();new RegExp("^[0-9]*$").test(n)?i.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):i.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error")}}else if(-1!==t.name.search("dayValueTextbox")){if(void 0!==(o=e.__baseControls[e.__id+"_dayValue"]))if(void 0!==(text=(i=o).getText())){n=text.trim();new RegExp("^[0-9]*$").test(n)?i.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):i.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error")}}else if(-1!==t.name.search("hourValueTextbox")){if(void 0!==(o=e.__baseControls[e.__id+"_hourValue"]))if(void 0!==(text=(i=o).getText())){n=text.trim();new RegExp("^[0-9]*$").test(n)?i.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):i.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-textbox-error","tchmi-timespan-picker-template-textbox-error")}}else if(-1!==t.name.search("minuteValueTextbox")){if(void 0!==(o=e.__baseControls[e.__id+"_minuteValue"]))if(void 0!==(text=(i=o).getText())){n=text.trim();new RegExp("^[0-9]*$").test(n)?i.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):i.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error")}}else if(-1!==t.name.search("millisecondValueTextbox")){if(void 0!==(o=e.__baseControls[e.__id+"_millisecondValue"]))if(void 0!==(text=(i=o).getText())){n=text.trim();if(new RegExp("^[0-9]*$").test(n)){(""===n?0:parseInt(n,10))<=999?i.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):i.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error")}else i.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error")}}else if(-1!==t.name.search("secondValueTextbox")){var o,i,text;if(void 0!==(o=e.__baseControls[e.__id+"_secondValue"]))if(void 0!==(text=(i=o).getText())){n=text.trim();new RegExp("^[0-9]*$").test(n)?i.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):i.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error")}}var s=e.__baseControls[e.__id+"_okButton"];void 0!==s&&(e.__elementTSTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error").length>0?s.setIsEnabled(!1):s.setIsEnabled(!0))}},n.prototype.__onUserInteractionFinished=function(){var e=this;return function(t){if(-1!==t.name.search("yearValueTextbox")){if(void 0!==(s=e.__baseControls[e.__id+"_yearValue"])&&void 0!==(text=(r=s).getText())){var n=text.trim();if(new RegExp("^[0-9]*$").test(n)){var o=void 0;(i=(o=""===n?0:parseInt(n,10)).toString())!==text&&r.setText(i)}}}else if(-1!==t.name.search("monthValueTextbox")){if(void 0!==(s=e.__baseControls[e.__id+"_monthValue"]))if(void 0!==(text=(r=s).getText())){n=text.trim();if(new RegExp("^[0-9]*$").test(n)){o=void 0;(i=(o=""===n?0:parseInt(n,10)).toString())!==text&&r.setText(i)}}}else if(-1!==t.name.search("dayValueTextbox")){if(void 0!==(s=e.__baseControls[e.__id+"_dayValue"]))if(void 0!==(text=(r=s).getText())){n=text.trim();if(new RegExp("^[0-9]*$").test(n)){o=void 0;(i=(o=""===n?0:parseInt(n,10)).toString())!==text&&r.setText(i)}}}else if(-1!==t.name.search("hourValueTextbox")){if(void 0!==(s=e.__baseControls[e.__id+"_hourValue"]))if(void 0!==(text=(r=s).getText())){n=text.trim();if(new RegExp("^[0-9]*$").test(n)){o=void 0;(i=(o=""===n?0:parseInt(n,10)).toString())!==text&&r.setText(i)}}}else if(-1!==t.name.search("minuteValueTextbox")){if(void 0!==(s=e.__baseControls[e.__id+"_minuteValue"]))if(void 0!==(text=(r=s).getText())){n=text.trim();if(new RegExp("^[0-9]*$").test(n)){o=void 0;(i=(o=""===n?0:parseInt(n,10)).toString())!==text&&r.setText(i)}}}else if(-1!==t.name.search("millisecondValueTextbox")){if(void 0!==(s=e.__baseControls[e.__id+"_millisecondValue"]))if(void 0!==(text=(r=s).getText())){n=text.trim();if(new RegExp("^[0-9]*$").test(n)){o=void 0;if((o=""===n?0:parseInt(n,10))<=999){var i=o.toString();r.setText(("000"+i).substring(Math.min((""+i).length,3)))}}}}else if(-1!==t.name.search("secondValueTextbox")){var s,r,text;if(void 0!==(s=e.__baseControls[e.__id+"_secondValue"]))if(void 0!==(text=(r=s).getText())){n=text.trim();if(new RegExp("^[0-9]*$").test(n)){o=void 0;(i=(o=""===n?0:parseInt(n,10)).toString())!==text&&r.setText(i)}}}}},n.prototype.setValue=function(valueNew,t){void 0===t&&(t=!0);var n=e.ValueConverter.toString(valueNew);null===n&&(n=this.getAttributeDefaultValueInternal("Value")),n!==this.__value&&(this.__value=n,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getValue"]),e.EventProvider.raise(this.__id+".onValueChanged",this.__value),t&&this.__processValue())},n.prototype.getValue=function(){return this.__value},n.prototype.__processValue=function(){var e={years:0,months:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0};null!==this.__value&&void 0!==this.__value&&(e=this.__isoToTimespanObject(this.__value));var t=this.__baseControls[this.__id+"_yearValue"];if(void 0!==t){var n=t;e.minutes<0?n.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):n.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"),n.setText(e.years.toString())}var o=this.__baseControls[this.__id+"_monthValue"];if(void 0!==o){var i=o;e.minutes<0?i.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):i.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"),i.setText(e.months.toString())}var s=this.__baseControls[this.__id+"_dayValue"];if(void 0!==s){var r=s;e.minutes<0?r.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):r.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"),r.setText(e.days.toString())}var _=this.__baseControls[this.__id+"_hourValue"];if(void 0!==_){var a=_;e.hours<0?a.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","Ttchmi-timespan-picker-template-textbox-error"):a.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"),a.setText(e.hours.toString())}var l=this.__baseControls[this.__id+"_minuteValue"];if(void 0!==l){var c=l;e.minutes<0?c.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):c.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"),c.setText(e.minutes.toString())}var d=this.__baseControls[this.__id+"_secondValue"];if(void 0!==d){var m=d;e.seconds<0?m.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):m.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"),m.setText(e.seconds.toString())}var h=this.__baseControls[this.__id+"_millisecondValue"];if(void 0!==h){var p=h;e.milliseconds>999||e.milliseconds<0?p.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"):p.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error","tchmi-timespan-picker-template-textbox-error"),p.setText(("000"+e.milliseconds).slice(-3))}var u=this.__baseControls[this.__id+"_okButton"];if(void 0!==u){var v=this.__elementTSTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiTimespanPicker-template-textbox-error");0===v.length&&(v=this.__elementTSTemplate.find(".tchmi-timespan-picker-template-textbox-error")),v.length>0?u.setIsEnabled(!1):u.setIsEnabled(!0)}},n.prototype.__processIsEnabled=function(){t.prototype.__processIsEnabled.call(this),this.getIsEnabled()||(e.TopMostLayer.remove(this,this.__elementTSTemplate),e.EventProvider.raise(this.__id+".onCancel"))},n}(e.Controls.System.TcHmiControl);t.TcHmiTimespanPicker=n}(t.Beckhoff||(t.Beckhoff={})),t.registerEx("TcHmiTimespanPicker","TcHmi.Controls.Beckhoff",e.Controls.Beckhoff.TcHmiTimespanPicker)}(e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={}));