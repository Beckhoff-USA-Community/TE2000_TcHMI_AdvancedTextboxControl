var TcHmi,__extends=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();!function(e){!function(t){!function(t){var o=function(t){function o(o,r,l){var n=t.call(this,o,r,l)||this;return n.__resizedEventDestroyEvent=null,n.__onResolverForFillColorWatchCallback=function(t){!1===n.__isAttached&&n.__suspendObjectResolver("fillColor"),t.error===e.Errors.NONE?tchmi_equal(t.value,n.__fillColor)||(n.__fillColor=t.value,e.EventProvider.raise(n.__id+".onFunctionResultChanged",["getFillColor"]),n.__processFillColor()):e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiPolygon, Id="+n.getId()+", Attribute=FillColor] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},n.__onResolverForStrokeColorWatchCallback=function(t){!1===n.__isAttached&&n.__suspendObjectResolver("strokeColor"),t.error===e.Errors.NONE?tchmi_equal(t.value,n.__strokeColor)||(n.__strokeColor=t.value,e.EventProvider.raise(n.__id+".onFunctionResultChanged",["getStrokeColor"]),n.__processStrokeColor()):e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiPolygon, Id="+n.getId()+", Attribute=StrokeColor] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},n}return __extends(o,t),o.prototype.__previnit=function(){if(this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_Beckhoff_TcHmiPolygon-template"),0===this.__elementTemplateRoot.length&&(this.__elementTemplateRoot=this.__element.find(".tchmi-polygon-template")),this.__elementSvg=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiPolygon-template-svg"),0===this.__elementSvg.length&&(this.__elementSvg=this.__elementTemplateRoot.find(".tchmi-polygon-template-svg")),this.__elementSvgPolygon=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiPolygon-template-svg-polygon"),0===this.__elementSvgPolygon.length&&(this.__elementSvgPolygon=this.__elementTemplateRoot.find(".tchmi-polygon-template-svg-polygon")),0===this.__elementTemplateRoot.length||0===this.__elementSvg.length||0===this.__elementSvgPolygon.length)throw new Error("Invalid Template.html");t.prototype.__previnit.call(this)},o.prototype.__init=function(){t.prototype.__init.call(this)},o.prototype.__attach=function(){t.prototype.__attach.call(this),this.__resizedEventDestroyEvent=e.EventProvider.register(this.__id+".onResized",this.__onResized())},o.prototype.__detach=function(){t.prototype.__detach.call(this),null!==this.__resizedEventDestroyEvent&&(this.__resizedEventDestroyEvent(),this.__resizedEventDestroyEvent=null)},o.prototype.destroy=function(){this.__keepAlive||t.prototype.destroy.call(this)},o.prototype.__onResized=function(){var e=this;return function(t,o){"None"!==e.__scaleMode&&e.__processPoints()}},o.prototype.setFillColor=function(valueNew){var t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("FillColor"));var o=this.__objectResolvers.get("fillColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("fillColor",{resolver:r,watchCallback:this.__onResolverForFillColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForFillColorWatchCallback)})},o.prototype.getFillColor=function(){return this.__fillColor},o.prototype.__processFillColor=function(){e.StyleProvider.processFillColor(this.__elementSvgPolygon,this.__fillColor)},o.prototype.setFillMode=function(valueNew){var t=e.ValueConverter.toString(valueNew);if(null===t&&(t=this.getAttributeDefaultValueInternal("FillMode")),t!==this.__fillMode){switch(t){case"EvenOdd":this.__fillMode=t;break;default:this.__fillMode="NonZero"}e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getFillMode"]),this.__processFillMode()}},o.prototype.getFillMode=function(){return this.__fillMode},o.prototype.__processFillMode=function(){switch(this.__fillMode){case"EvenOdd":e.StyleProvider.setSimpleElementStyle(this.__elementSvgPolygon,"fill-rule","evenodd");break;case"NonZero":default:e.StyleProvider.setSimpleElementStyle(this.__elementSvgPolygon,"fill-rule","")}this.__elementSvgPolygon.remove(),this.__elementSvg.append(this.__elementSvgPolygon)},o.prototype.setStrokeColor=function(valueNew){var t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("StrokeColor"));var o=this.__objectResolvers.get("strokeColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("strokeColor",{resolver:r,watchCallback:this.__onResolverForStrokeColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForStrokeColorWatchCallback)})},o.prototype.getStrokeColor=function(){return this.__strokeColor},o.prototype.__processStrokeColor=function(){e.StyleProvider.processStrokeColor(this.__elementSvgPolygon,this.__strokeColor)},o.prototype.setStrokeStyle=function(valueNew){var t=e.ValueConverter.toString(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("StrokeStyle")),t!==this.__strokeStyle&&(this.__strokeStyle=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStrokeStyle"]),this.__processStrokeStyle())},o.prototype.getStrokeStyle=function(){return this.__strokeStyle},o.prototype.__processStrokeStyle=function(){e.StyleProvider.setSimpleElementStyle(this.__elementSvgPolygon,"stroke-dasharray",this.__strokeStyle)},o.prototype.setStrokeThickness=function(valueNew){var t=e.ValueConverter.toNumber(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("StrokeThickness")),t!==this.__strokeThickness&&(this.__strokeThickness=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStrokeThickness"]),this.__processStrokeThickness())},o.prototype.getStrokeThickness=function(){return this.__strokeThickness},o.prototype.__processStrokeThickness=function(){"number"!=typeof this.__strokeThickness?e.StyleProvider.setSimpleElementStyle(this.__elementSvgPolygon,"stroke-width",null):e.StyleProvider.setSimpleElementStyle(this.__elementSvgPolygon,"stroke-width",this.__strokeThickness.toString())},o.prototype.getStrokeThicknessUnit=function(){return"px"},o.prototype.__processStrokeThicknessUnit=function(){},o.prototype.setPoints=function(valueNew){var t=e.ValueConverter.toString(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("Points")),t!==this.__points&&(this.__points=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getPoints"]),this.__processPoints())},o.prototype.getPoints=function(){return this.__points},o.prototype.__processPoints=function(){if(this.__points){var e=this.__points.split(/ |,/).filter(function(e){return""!==e}).map(function(e){return parseFloat(e)});if(e.length<2)return void this.__elementSvgPolygon[0].setAttribute("points","");if("None"===this.__scaleMode)this.__elementSvgPolygon[0].setAttribute("points",e.join(" "));else{var t=this.getRenderedWidth();if(!t)return;var o=this.getRenderedHeight();if(!o)return;for(var r=null,l=null,n=null,i=null,s=0,_=e.length;s<_;s++)s%2==0?((null===r||e[s]<r)&&(r=e[s]),(null===n||e[s]>n)&&(n=e[s])):((null===l||e[s]<l)&&(l=e[s]),(null===i||e[s]>i)&&(i=e[s]));var c=n-r,h=i-l,a=t/(c=0!==c?c:t),u=o/(h=0!==h?h:o);switch(this.__scaleMode){case"ScaleToFill":for(s=0,_=e.length;s<_;s++)e[s]=s%2==0?(e[s]-r)*a:(e[s]-l)*u;break;case"ScaleToFit":var p=a<u?a:u;for(s=0,_=e.length;s<_;s++)e[s]=s%2==0?(e[s]-r)*p:(e[s]-l)*p;break;case"ScaleToFitWidth":for(s=0,_=e.length;s<_;s++)e[s]=s%2==0?(e[s]-r)*a:(e[s]-l)*a;break;case"ScaleToFitHeight":for(s=0,_=e.length;s<_;s++)e[s]=s%2==0?(e[s]-r)*u:(e[s]-l)*u}this.__elementSvgPolygon[0].setAttribute("points",e.join(" "))}}else this.__elementSvgPolygon[0].setAttribute("points","")},o.prototype.setScaleMode=function(valueNew){var t=e.ValueConverter.toScaleModeString(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("ScaleMode")),t!==this.__scaleMode&&(this.__scaleMode=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getScaleMode"]),this.__processScaleMode())},o.prototype.getScaleMode=function(){return this.__scaleMode},o.prototype.__processScaleMode=function(){this.__processPoints()},o}(e.Controls.System.TcHmiControl);t.TcHmiPolygon=o}(t.Beckhoff||(t.Beckhoff={})),t.registerEx("TcHmiPolygon","TcHmi.Controls.Beckhoff",e.Controls.Beckhoff.TcHmiPolygon)}(e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={}));