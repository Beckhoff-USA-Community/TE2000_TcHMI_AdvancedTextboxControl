var TcHmi,__extends=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();!function(e){!function(t){!function(t){var o=function(t){function o(o,i,n){var r=t.call(this,o,i,n)||this;return r.__layouts=null,r.__currentLayout={name:"empty",dimensions:{width:1,height:1},keys:[]},r.__fixedTargetInputElements=null,r.__fixedTargetTextareaElements=null,r.__modifiers={Shift:!1,Control:!1,Alt:!1,Meta:!1,CapsLock:!1,NumLock:!0,Insert:!1},r.__keys=new Map,r.__additionalKeys=new Map,r.__pressedKeyMouse=null,r.__pressedKeysTouch=[],r.__pressedKeys=[],r.__keyActions={KeyChar:{press:function(e,t,o){if(null!==t){var text=t.value;null==text&&(text="");var i=r.__specialKeys[e.key[o]],n=void 0!==i?i:e.key[o];n=r.__unescape(n),null!==r.__compositionKey&&void 0!==r.__compositionKey.composition[n]&&(n=r.__compositionKey.composition[n]),r.__compositionKey=null;var s=r.__getSelectionStartOrEnd(t,"selectionStart"),a=r.__getSelectionStartOrEnd(t,"selectionEnd");t.value=text.substring(0,s)+n+text.substring(r.__modifiers.Insert?a+1:a),r.__setCaretPosition(t,s+n.length)}},release:function(e,t,o){e.ignoreModifiers||r.__unstickAllKeys()}},Shift:{press:function(e,t,o){return r.__toggleModifier("Shift",!0)},release:function(e,t,o){return r.__toggleModifier("Shift",!1)}},Control:{press:function(e,t,o){return r.__toggleModifier("Control",!0)},release:function(e,t,o){return r.__toggleModifier("Control",!1)}},Alt:{press:function(e,t,o){return r.__toggleModifier("Alt",!0)},release:function(e,t,o){return r.__toggleModifier("Alt",!1)}},Meta:{press:function(e,t,o){return r.__toggleModifier("Meta",!0)},release:function(e,t,o){return r.__toggleModifier("Meta",!1)}},CapsLock:{press:function(e,t,o){return r.__toggleModifier("CapsLock")}},NumLock:{press:function(e,t,o){return r.__toggleModifier("NumLock")}},Insert:{press:function(e,t,o){return r.__toggleModifier("Insert")}},ArrowLeft:{press:function(e,t,o){if(null!==t){var i=r.__getSelectionStartOrEnd(t,"selectionStart"),n=r.__getSelectionStartOrEnd(t,"selectionEnd");r.__modifiers.Shift||i===n?r.__moveCaret(t,"backward",function(o){return r.__caretPositionLeft(o,t.value,e.ignoreModifiers)},e.ignoreModifiers):r.__setCaretPosition(t,i),r.__arrowUpDownTarget=null}}},ArrowRight:{press:function(e,t,o){if(null!==t){var i=r.__getSelectionStartOrEnd(t,"selectionStart"),n=r.__getSelectionStartOrEnd(t,"selectionEnd");r.__modifiers.Shift||i===n?r.__moveCaret(t,"forward",function(o){return r.__caretPositionRight(o,t.value,e.ignoreModifiers)},e.ignoreModifiers):r.__setCaretPosition(t,n),r.__arrowUpDownTarget=null}}},ArrowUp:{press:function(e,t,o){if(null!==t){r.__moveCaret(t,"backward",function(e){var o=r.__getMirrorElement(t),i=r.__getCaretCoordinates(o,t.value,e),n=i,s=e-1,a=r.__getCaretCoordinates(o,t.value,s),l=r.__getSelectionStartOrEnd(t,"selectionStart"),_=r.__getSelectionStartOrEnd(t,"selectionEnd");for(null!==r.__arrowUpDownTarget&&r.__arrowUpDownTarget.input===t&&r.__arrowUpDownTarget.selectionStart===l&&r.__arrowUpDownTarget.selectionEnd===_||(r.__arrowUpDownTarget={left:i.left,input:t,selectionStart:l,selectionEnd:_});s>=0&&(a.top===i.top||a.left>r.__arrowUpDownTarget.left);)n=a,s--,a=r.__getCaretCoordinates(o,t.value,s);return o.parentNode.removeChild(o),s<0?0:r.__arrowUpDownTarget.left-a.left<=n.left-r.__arrowUpDownTarget.left||n.top===i.top?s:s+1},e.ignoreModifiers),null!==r.__arrowUpDownTarget&&(r.__arrowUpDownTarget.selectionStart=r.__getSelectionStartOrEnd(t,"selectionStart"),r.__arrowUpDownTarget.selectionEnd=r.__getSelectionStartOrEnd(t,"selectionEnd"))}}},ArrowDown:{press:function(e,t,o){if(null!==t){r.__moveCaret(t,"forward",function(e){var o=r.__getMirrorElement(t),i=r.__getCaretCoordinates(o,t.value,e),n=i,s=e+1,a=r.__getCaretCoordinates(o,t.value,s),l=0,_=r.__getSelectionStartOrEnd(t,"selectionStart"),c=r.__getSelectionStartOrEnd(t,"selectionEnd");for(null!==r.__arrowUpDownTarget&&r.__arrowUpDownTarget.input===t&&r.__arrowUpDownTarget.selectionStart===_&&r.__arrowUpDownTarget.selectionEnd===c||(r.__arrowUpDownTarget={left:i.left,input:t,selectionStart:_,selectionEnd:c});s<=t.value.length&&(a.top===i.top||a.left<r.__arrowUpDownTarget.left)&&(0===l||a.top-i.top<=l);)l=a.top-i.top,n=a,s++,a=r.__getCaretCoordinates(o,t.value,s);return o.parentNode.removeChild(o),s>t.value.length?t.value.length:0!==l&&a.top-i.top>l?s-1:a.left-r.__arrowUpDownTarget.left<r.__arrowUpDownTarget.left-n.left||n.top===i.top?s:s-1},e.ignoreModifiers),null!==r.__arrowUpDownTarget&&(r.__arrowUpDownTarget.selectionStart=r.__getSelectionStartOrEnd(t,"selectionStart"),r.__arrowUpDownTarget.selectionEnd=r.__getSelectionStartOrEnd(t,"selectionEnd"))}}},Home:{press:function(e,t,o){if(null!==t){r.__moveCaret(t,"backward",function(o){if(r.__modifiers.Control&&!e.ignoreModifiers)return 0;for(var i=r.__getMirrorElement(t),n=r.__getCaretCoordinates(i,t.value,o),s=o-1,a=r.__getCaretCoordinates(i,t.value,s);s>=0&&a.top===n.top;)s--,a=r.__getCaretCoordinates(i,t.value,s);return i.parentNode.removeChild(i),s<0?0:s+1},e.ignoreModifiers)}}},End:{press:function(e,t,o){if(null!==t){r.__moveCaret(t,"forward",function(o){if(r.__modifiers.Control&&!e.ignoreModifiers)return t.value.length;for(var i=r.__getMirrorElement(t),n=r.__getCaretCoordinates(i,t.value,o),s=o+1,a=r.__getCaretCoordinates(i,t.value,s);s<=t.value.length&&a.top===n.top;)s++,a=r.__getCaretCoordinates(i,t.value,s);return i.parentNode.removeChild(i),s>t.value.length?t.value.length:s-1},e.ignoreModifiers)}}},Backspace:{press:function(e,t,o){if(null!==t){var i=r.__getSelectionStartOrEnd(t,"selectionStart"),n=r.__getSelectionStartOrEnd(t,"selectionEnd"),text=t.value;i===n&&(i=r.__caretPositionLeft(i,text,e.ignoreModifiers)),text=text.substring(0,i)+text.substring(n),t.value=text,r.__setCaretPosition(t,i)}}},Delete:{press:function(e,t,o){if(null!==t){var i=r.__getSelectionStartOrEnd(t,"selectionStart"),n=r.__getSelectionStartOrEnd(t,"selectionEnd"),text=t.value;i===n&&(n=r.__caretPositionRight(n,text,e.ignoreModifiers)),text=text.substring(0,i)+text.substring(n),t.value=text,r.__setCaretPosition(t,i)}}},SelectAll:{press:function(t,o,i){if(null!==o){r.__setSelectionStartOrEnd(o,"selectionStart",0),r.__setSelectionStartOrEnd(o,"selectionEnd",o.value.length);try{o.selectionDirection="forward"}catch(t){e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+r.getId()+'] Tried to set selectionDirection on an input element that does not support this. Try using an <input type="text" /> element.')}}},release:function(e,t,o){e.ignoreModifiers||r.__unstickAllKeys()}}},r.__keyCodes={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Delete:46,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,"^":220,"´":221,"`":221},r.__specialKeys={Tab:"\t",Enter:"\n"},r.__stickiedKeys=[],r.__keysToStick=[],r.__compositionKey=null,r.__interactedKeys=[],r.__additionalKeysBaseKey=null,r.__arrowUpDownTarget=null,r.__shownLabels=[],r.__hiddenLabels=[],r.__indirectInputElement=null,r.__activeElements=[],r.__fixedTargetObserver=null,r.__resizedEventDestroyEvent=null,r.__onResized=function(e,t){r.__processScaleMode()},r.__onFocusIn=function(e){r.__layouts&&r.__layouts.useIndirectInput&&!r.__fixedTarget&&e.target!==r.__indirectInputElement&&r.__setActiveElements(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement?[e.target]:[])},r.__onFocusOut=function(e){r.__layouts&&r.__layouts.useIndirectInput&&!r.__fixedTarget&&e.relatedTarget!==r.__indirectInputElement&&r.__setActiveElements([])},r.__onRootMouseDownOrTouchStart=function(e){"mousedown"===e.type&&0!==e.button||r.__layouts&&r.__layouts.useIndirectInput&&e.target===r.__indirectInputElement||e.preventDefault()},r.__onDocumentMouseDownOrTouchStart=function(e){if(null!==r.__additionalKeysBaseKey&&e.target!==r.__additionalKeysBaseKey.element&&e.target instanceof Element){var t=r.__additionalKeys.get(r.__additionalKeysBaseKey.element);t&&!t.contains(e.target)&&r.__hideAdditionalKeys()}},r.__onMouseDown=function(t){if(0===t.button&&t.target instanceof HTMLElement&&r.getIsEnabled()&&e.Access.checkAccess(r,"operate")){for(var o=t.target;o&&(!o.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")||!o.classList.contains("tchmi-keyboard-template-key"));){if(o===t.currentTarget)return;o=o.parentElement}o&&r.__pressedKeyMouse!==o&&(o.classList.add("down"),r.__pressedKeyMouse=o,r.__keyInteractionStarted(o),r.__raiseKeyPressStarted(o))}},r.__onMouseOver=function(t){if(t.target instanceof HTMLElement&&r.getIsEnabled()&&e.Access.checkAccess(r,"operate")){for(var o=t.target;o&&(!o.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")||!o.classList.contains("tchmi-keyboard-template-key"));){if(o===t.currentTarget)return;o=o.parentElement}o&&(o.classList.add("hover"),t.buttons>0&&null!==r.__additionalKeysBaseKey&&r.__additionalKeysBaseKey.dragging&&r.__additionalKeys.get(r.__additionalKeysBaseKey.element)===o.parentElement&&!o.classList.contains("down")&&(o.classList.add("down"),r.__raiseKeyPressStarted(o)))}},r.__onMouseOut=function(t){if(t.target instanceof HTMLElement&&r.getIsEnabled()&&e.Access.checkAccess(r,"operate")){for(var o=t.target;o&&(!o.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")||!o.classList.contains("tchmi-keyboard-template-key"));){if(o===t.currentTarget)return;o=o.parentElement}o&&(r.__handleMouseOrTouchLeave(o,{x:t.clientX,y:t.clientY}),r.__pressedKeyMouse=null,r.__raiseKeyPressEnded(o,"Canceled"))}},r.__onMouseUp=function(t){if(t.target instanceof HTMLElement&&r.getIsEnabled()&&e.Access.checkAccess(r,"operate")){for(var o=t.target;o&&(!o.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")||!o.classList.contains("tchmi-keyboard-template-key"));){if(o===t.currentTarget)return;o=o.parentElement}o&&(o.classList.remove("down"),null!==r.__additionalKeysBaseKey&&(r.__additionalKeysBaseKey.dragging&&r.__additionalKeys.get(r.__additionalKeysBaseKey.element)===o.parentElement&&(r.__pressedKeyMouse=o,r.__keyInteractionStarted(o)),r.__additionalKeysBaseKey.dragging=!1),o===r.__pressedKeyMouse&&(r.__pressedKeyMouse=null,r.__keyInteractionEnded(o),r.__raiseKeyPressEnded(o,"Finished")))}},r.__onTouchStart=function(t){if(r.getIsEnabled()&&e.Access.checkAccess(r,"operate"))for(var o=function(e,o){var i=t.changedTouches[e];if(!(i.target instanceof HTMLElement))return"continue";for(var n=i.target;n&&(!n.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")||!n.classList.contains("tchmi-keyboard-template-key"));){if(n===t.currentTarget){n=null;break}n=n.parentElement}return n?r.__pressedKeysTouch.filter(function(e){return e.keyElement===n}).length>0?"continue":(n.classList.add("hover"),n.classList.add("down"),r.__pressedKeysTouch.push({touchID:i.identifier,keyElement:n}),r.__keyInteractionStarted(n),void r.__raiseKeyPressStarted(n)):"continue"},i=0,n=t.changedTouches.length;i<n;i++)o(i)},r.__onTouchMove=function(t){if(r.getIsEnabled()&&e.Access.checkAccess(r,"operate"))for(var o=function(e,o){var i=r.__pressedKeysTouch.filter(function(o){return o.touchID===t.changedTouches[e].identifier})[0];if(!i)return"continue";var n=t.changedTouches[e],s=document.elementFromPoint(n.clientX,n.clientY);if(null!==s&&(s.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label")||s.classList.contains("tchmi-keyboard-template-label"))&&(s=s.parentElement),null===s||s.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")&&s.classList.contains("tchmi-keyboard-template-key")||(s=null),s!==i.keyElement&&null!==i.keyElement){var a=r.__handleMouseOrTouchLeave(i.keyElement,{x:n.clientX,y:n.clientY});if(r.__raiseKeyPressEnded(i.keyElement,"Canceled"),i.keyElement=null,!a)return"continue"}null!==s&&null===i.keyElement&&(s.classList.add("hover"),null!==r.__additionalKeysBaseKey&&r.__additionalKeysBaseKey.dragging&&r.__additionalKeys.get(r.__additionalKeysBaseKey.element)===s.parentElement&&(s.classList.add("down"),r.__raiseKeyPressStarted(s)),i.keyElement=s)},i=0,n=t.changedTouches.length;i<n;i++)o(i)},r.__onTouchEndOrCancel=function(t){if(r.getIsEnabled()&&e.Access.checkAccess(r,"operate"))for(var o=function(e,o){var i=t.changedTouches[e],n=r.__pressedKeysTouch.filter(function(e){return e.touchID===i.identifier})[0];if(!(n&&i.target instanceof HTMLElement))return"continue";for(var s=i.target;s&&(s.classList.contains(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")||s.classList.contains(".tchmi-keyboard-template-key"));){if(s===t.currentTarget){s=null;break}s=s.parentElement}if(!s)return"continue";s.classList.remove("hover"),s.classList.remove("down"),r.__pressedKeysTouch.splice(r.__pressedKeysTouch.indexOf(n),1);var a=document.elementFromPoint(i.clientX,i.clientY);if(null!==a&&(a.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label")||a.classList.contains("tchmi-keyboard-template-label"))&&(a=a.parentElement),null!==a&&(a.classList.remove("hover"),a.classList.remove("down")),null===a||a.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")&&a.classList.contains("tchmi-keyboard-template-key")||(a=null),null===a||a!==t.target&&a.parentElement!==t.target)return"continue";null!==r.__additionalKeysBaseKey&&(r.__additionalKeysBaseKey.dragging&&r.__additionalKeys.get(r.__additionalKeysBaseKey.element)===a.parentElement&&r.__keyInteractionStarted(a),r.__additionalKeysBaseKey.dragging=!1),r.__keyInteractionEnded(a),r.__raiseKeyPressEnded(a,"Finished")},i=0,n=t.changedTouches.length;i<n;i++)o(i)},r.__onResolverForIndirectInputPaddingWatchCallback=function(t){!1===r.__isAttached&&r.__suspendObjectResolver("indirectInputPadding"),t.error===e.Errors.NONE?tchmi_equal(t.value,r.__indirectInputPadding)||(r.__indirectInputPadding=t.value,e.EventProvider.raise(r.__id+".onFunctionResultChanged",["getIndirectInputPadding"]),r.__processIndirectInputPadding()):e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+r.getId()+", Attribute=IndirectInputPadding] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},r.__onResolverForKeyboardPaddingWatchCallback=function(t){!1===r.__isAttached&&r.__suspendObjectResolver("keyboardPadding"),t.error===e.Errors.NONE?tchmi_equal(t.value,r.__keyboardPadding)||(r.__keyboardPadding=t.value,e.EventProvider.raise(r.__id+".onFunctionResultChanged",["getKeyboardPadding"]),r.__processKeyboardPadding()):e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+r.getId()+", Attribute=KeyboardPadding] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},r.__onResolverForKeyPaddingWatchCallback=function(t){!1===r.__isAttached&&r.__suspendObjectResolver("keyPadding"),t.error===e.Errors.NONE?tchmi_equal(t.value,r.__keyPadding)||(r.__keyPadding=t.value,e.EventProvider.raise(r.__id+".onFunctionResultChanged",["getKeyPadding"]),r.__processKeyPadding()):e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+r.getId()+", Attribute=KeyPadding] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},r.__onResolverForAdditionalKeyBackdropPaddingWatchCallback=function(t){!1===r.__isAttached&&r.__suspendObjectResolver("additionalKeyBackdropPadding"),t.error===e.Errors.NONE?tchmi_equal(t.value,r.__additionalKeyBackdropPadding)||(r.__additionalKeyBackdropPadding=t.value,e.EventProvider.raise(r.__id+".onFunctionResultChanged",["getAdditionalKeyBackdropPadding"]),r.__processAdditionalKeyBackdropPadding()):e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+r.getId()+", Attribute=AdditionalKeyBackdropPadding] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},r.__onResolverForKeyBackgroundColorWatchCallback=function(t){!1===r.__isAttached&&r.__suspendObjectResolver("keyBackgroundColor"),t.error===e.Errors.NONE?tchmi_equal(t.value,r.__keyBackgroundColor)||(r.__keyBackgroundColor=t.value,e.EventProvider.raise(r.__id+".onFunctionResultChanged",["getKeyBackgroundColor"]),r.__processKeyBackgroundColor()):e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+r.getId()+", Attribute=KeyBackgroundColor] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},r.__onResolverForLabelColorWatchCallback=function(t){!1===r.__isAttached&&r.__suspendObjectResolver("labelColor"),t.error===e.Errors.NONE?tchmi_equal(t.value,r.__labelColor)||(r.__labelColor=t.value,e.EventProvider.raise(r.__id+".onFunctionResultChanged",["getLabelColor"]),r.__processLabelColor()):e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+r.getId()+", Attribute=LabelColor] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},r.__onResolverForLabelStrokeColorWatchCallback=function(t){!1===r.__isAttached&&r.__suspendObjectResolver("labelStrokeColor"),t.error===e.Errors.NONE?tchmi_equal(t.value,r.__labelStrokeColor)||(r.__labelStrokeColor=t.value,e.EventProvider.raise(r.__id+".onFunctionResultChanged",["getLabelStrokeColor"]),r.__processLabelStrokeColor()):e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+r.getId()+", Attribute=LabelStrokeColor] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},r.__onResolverForLabelFillColorWatchCallback=function(t){!1===r.__isAttached&&r.__suspendObjectResolver("labelFillColor"),t.error===e.Errors.NONE?tchmi_equal(t.value,r.__labelFillColor)||(r.__labelFillColor=t.value,e.EventProvider.raise(r.__id+".onFunctionResultChanged",["getLabelFillColor"]),r.__processLabelFillColor()):e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+r.getId()+", Attribute=LabelFillColor] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},r.__onResolverForAdditionalKeyBackdropColorWatchCallback=function(t){!1===r.__isAttached&&r.__suspendObjectResolver("additionalKeyBackdropColor"),t.error===e.Errors.NONE?tchmi_equal(t.value,r.__additionalKeyBackdropColor)||(r.__additionalKeyBackdropColor=t.value,e.EventProvider.raise(r.__id+".onFunctionResultChanged",["getAdditionalKeyBackdropColor"]),r.__processAdditionalKeyBackdropColor()):e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+r.getId()+", Attribute=AdditionalKeyBackdropColor] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},r}return __extends(o,t),o.prototype.__previnit=function(){if(this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template"),0===this.__elementTemplateRoot.length&&(this.__elementTemplateRoot=this.__element.find(".tchmi-keyboard-template")),this.__elementPaddingContainer=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-padding-container"),0===this.__elementPaddingContainer.length&&(this.__elementPaddingContainer=this.__elementTemplateRoot.find(".tchmi-keyboard-template-padding-container")),0===this.__elementTemplateRoot.length||0===this.__elementPaddingContainer.length)throw new Error("Invalid Template.html");t.prototype.__previnit.call(this)},o.prototype.__init=function(){if(t.prototype.__init.call(this),!this.__layoutFile){var e=this.__attrs["data-tchmi-layout"];e&&this.setLayout(e.value)}var o=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1},i=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!1,capture:!1};this.__element[0].addEventListener("mousedown",this.__onRootMouseDownOrTouchStart,i),this.__element[0].addEventListener("touchstart",this.__onRootMouseDownOrTouchStart,i),this.__element[0].addEventListener("mousedown",this.__onMouseDown,o),this.__element[0].addEventListener("mouseover",this.__onMouseOver,o),this.__element[0].addEventListener("mouseout",this.__onMouseOut,o),this.__element[0].addEventListener("mouseup",this.__onMouseUp,o),this.__element[0].addEventListener("touchstart",this.__onTouchStart,o),this.__element[0].addEventListener("touchmove",this.__onTouchMove,o),this.__element[0].addEventListener("touchend",this.__onTouchEndOrCancel,o),this.__element[0].addEventListener("touchcancel",this.__onTouchEndOrCancel,o)},o.prototype.__attach=function(){t.prototype.__attach.call(this),this.__resizedEventDestroyEvent=e.EventProvider.register(this.__id+".onResized",this.__onResized);var o=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1};document.addEventListener("focusin",this.__onFocusIn,o),document.addEventListener("focusout",this.__onFocusOut,o),document.addEventListener("mousedown",this.__onDocumentMouseDownOrTouchStart,o),document.addEventListener("touchstart",this.__onDocumentMouseDownOrTouchStart,o),this.__processFixedTarget()},o.prototype.__detach=function(){t.prototype.__detach.call(this),null!==this.__resizedEventDestroyEvent&&(this.__resizedEventDestroyEvent(),this.__resizedEventDestroyEvent=null),document.removeEventListener("focusin",this.__onFocusIn),document.removeEventListener("focusout",this.__onFocusOut),document.removeEventListener("mousedown",this.__onDocumentMouseDownOrTouchStart),document.removeEventListener("touchstart",this.__onDocumentMouseDownOrTouchStart)},o.prototype.destroy=function(){this.__keepAlive||(this.__element[0].removeEventListener("mousedown",this.__onRootMouseDownOrTouchStart),this.__element[0].removeEventListener("touchstart",this.__onRootMouseDownOrTouchStart),this.__element[0].removeEventListener("mousedown",this.__onMouseDown),this.__element[0].removeEventListener("mouseenter",this.__onMouseOver),this.__element[0].removeEventListener("mouseleave",this.__onMouseOut),this.__element[0].removeEventListener("mouseup",this.__onMouseUp),this.__element[0].removeEventListener("touchstart",this.__onTouchStart),this.__element[0].removeEventListener("touchmove",this.__onTouchMove),this.__element[0].removeEventListener("touchend",this.__onTouchEndOrCancel),this.__element[0].removeEventListener("touchcancel",this.__onTouchEndOrCancel),this.__layoutFileXhr&&(this.__layoutFileXhr.abort(),this.__layoutFileXhr=void 0),t.prototype.destroy.call(this))},o.prototype.__handleMouseOrTouchLeave=function(e,t){e.classList.remove("hover"),e.classList.remove("down");var i=this.__interactedKeys.filter(function(t){return t.element===e})[0];if(void 0===i)return!1;if(i.key.longpressAction===o.LongpressAction.ADDITIONALKEYS&&!i.timedOut){var n=e.getBoundingClientRect(),r={x:n.left+n.width/2,y:n.top+n.height/2},s=e.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-backdrop")[0].getBoundingClientRect(),a={x:Math.round((t.x-r.x)/n.width),y:Math.round((t.y-r.y)/n.height)},l=!1;if(s.top<r.y&&s.left<r.x&&s.right>r.x&&a.y<=-1?l=!0:s.bottom>r.y&&s.left<r.x&&s.right>r.x&&a.y>=1?l=!0:s.left<r.x&&s.top<r.y&&s.bottom>r.y&&a.x<=-1?l=!0:s.right>r.x&&s.top<r.y&&s.bottom>r.y&&a.x>=1&&(l=!0),l)return-1!==i.timeoutID&&(window.clearTimeout(i.timeoutID),i.timeoutID=-1),i.timedOut=!0,this.__showAdditionalKeys(i.element),!1}return this.__interactedKeys=this.__interactedKeys.filter(function(e){return e.element!==i.element}),-1!==i.timeoutID&&(window.clearTimeout(i.timeoutID),i.timeoutID=-1),!0},o.prototype.__showAdditionalKeys=function(t){var o=this.__additionalKeys.get(t);if(o){var i=t.getBoundingClientRect();o.style.width=i.width+"px",o.style.height=i.height+"px",o.style.left=i.left+"px",o.style.top=i.top+"px";var n=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1},r=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!1,capture:!1};o.addEventListener("mousedown",this.__onRootMouseDownOrTouchStart,r),o.addEventListener("touchstart",this.__onRootMouseDownOrTouchStart,r),o.addEventListener("mousedown",this.__onMouseDown,n),o.addEventListener("mouseover",this.__onMouseOver,n),o.addEventListener("mouseout",this.__onMouseOut,n),o.addEventListener("mouseup",this.__onMouseUp,n),o.addEventListener("touchstart",this.__onTouchStart,n),o.addEventListener("touchmove",this.__onTouchMove,n),o.addEventListener("touchend",this.__onTouchEndOrCancel,n),o.addEventListener("touchcancel",this.__onTouchEndOrCancel,n),e.TopMostLayer.addEx($(o),{dimBackground:!1,modal:!1,removeCb:function(){return t.appendChild(o)}}),t.classList.add("show-additional-keys"),this.__additionalKeysBaseKey={element:t,dragging:!0}}},o.prototype.__hideAdditionalKeys=function(){var t=this;if(null!==this.__additionalKeysBaseKey){var o=this.__additionalKeys.get(this.__additionalKeysBaseKey.element);o&&(o.removeEventListener("mousedown",this.__onRootMouseDownOrTouchStart),o.removeEventListener("touchstart",this.__onRootMouseDownOrTouchStart),o.removeEventListener("mousedown",this.__onMouseDown),o.removeEventListener("mouseover",this.__onMouseOver),o.removeEventListener("mouseout",this.__onMouseOut),o.removeEventListener("mouseup",this.__onMouseUp),o.removeEventListener("touchstart",this.__onTouchStart),o.removeEventListener("touchmove",this.__onTouchMove),o.removeEventListener("touchend",this.__onTouchEndOrCancel),o.removeEventListener("touchcancel",this.__onTouchEndOrCancel),e.TopMostLayer.removeEx($(o)),this.__additionalKeysBaseKey.element.classList.remove("show-additional-keys"),this.__interactedKeys=this.__interactedKeys.filter(function(e){return e.element!==t.__additionalKeysBaseKey.element}),this.__additionalKeysBaseKey=null)}},o.prototype.__keyInteractionStarted=function(e){var t=this;null!==this.__additionalKeysBaseKey&&this.__additionalKeysBaseKey.element!==e&&this.__additionalKeys.get(this.__additionalKeysBaseKey.element)!==e.parentElement&&this.__hideAdditionalKeys();var i=this.__interactedKeys.filter(function(t){return t.element===e})[0];if(void 0===i){if(i={element:e,key:this.__getKey(e),pressed:!1,timeoutID:-1,timedOut:!1},null!==this.__additionalKeysBaseKey&&this.__additionalKeysBaseKey.element===i.element)i.hideAdditionalKeys=!0;else if(o.isStandardKey(i.key)){var n=i.key;switch(n.longpressAction){case o.LongpressAction.REPEAT:i.timeoutID=window.setTimeout(function(){var e=function(){t.__pressKey(n,!0),i.pressed=!0,i.timeoutID=window.setTimeout(e,t.__repetitionDelay)};t.__pressKey(n),i.pressed=!0,i.timedOut=!0,i.timeoutID=window.setTimeout(e,t.__repetitionDelay)},this.__longpressDelay);break;case o.LongpressAction.ADDITIONALKEYS:i.timeoutID=window.setTimeout(function(){t.__showAdditionalKeys(i.element),i.timedOut=!0,i.timeoutID=-1},this.__longpressDelay);break;case o.LongpressAction.LOCK:if(n.mode===o.KeyMode.STICKY){if(n.active&&!n.locked)if(void 0!==(a=this.__getStickiedKey(n,this.__stickiedKeys))&&void 0!==this.__longpressDelay&&Date.now()-a.stickTime<=this.__longpressDelay){var r=this.__getStickiedKey(n,this.__keysToStick);if(void 0===r){var s=this.__keyToStickiedKey(n,!0);this.__keysToStick.push(s)}else r.locked=!0;break}i.timeoutID=window.setTimeout(function(){var e=t.__getStickiedKey(n,t.__keysToStick);void 0!==e&&(e.locked=!0),i.timedOut=!0,i.timeoutID=-1},this.__longpressDelay)}case o.LongpressAction.NONE:if(n.mode===o.KeyMode.STICKY&&(this.__pressKey(n),i.pressed=!0,void 0===this.__getStickiedKey(n,this.__keysToStick))){var a=this.__keyToStickiedKey(n,!1);this.__keysToStick.push(a)}}}this.__interactedKeys.push(i)}else i.hideAdditionalKeys=!0},o.prototype.__keyInteractionEnded=function(e){var t=this.__interactedKeys.filter(function(t){return t.element===e})[0];if(void 0!==t)if(null===this.__additionalKeysBaseKey||this.__additionalKeysBaseKey.element!==t.element){t.element.classList.contains("additional-key")&&this.__hideAdditionalKeys();var i=t.key;if(this.__interactedKeys.splice(this.__interactedKeys.indexOf(t),1),t.pressed||(this.__pressKey(i),t.pressed=!0),-1!==t.timeoutID&&(window.clearTimeout(t.timeoutID),t.timeoutID=-1),o.isStandardKey(i))if(i.mode===o.KeyMode.STICKY){var n=this.__getStickiedKey(i,this.__keysToStick);!i.active||!i.locked&&void 0!==n&&n.locked?void 0!==n?(this.__stickKey(i,n.locked),this.__keysToStick.splice(this.__keysToStick.indexOf(n),1)):this.__releaseKey(i):this.__unstickKey(i,!0)}else this.__releaseKey(i),i.mode===o.KeyMode.TOGGLE&&this.__keys.forEach(function(e,t){o.isStandardKey(i)&&(i.specialCapslock&&o.isStandardKeyDefinition(e)?e.capsLock&&e.capsLock[i.keyPath.join("")]===i.key.join(",")&&t.classList.toggle("active"):e[i.keyPath.join("")]===i.key.join(",")&&t.classList.toggle("active"))});else this.__releaseKey(i)}else t.hideAdditionalKeys&&this.__hideAdditionalKeys()},o.prototype.__pressKey=function(e,t){if(void 0===t&&(t=!1),o.isStandardKey(e)&&(e.mode!==o.KeyMode.STICKY||!e.active)){this.__layouts&&this.__layouts.useIndirectInput&&this.__indirectInputElement&&document.activeElement!==this.__indirectInputElement&&this.__startIndirectInput();for(var i=this.__getTargetElements(),n=0,r=i.length;n<r;n++)for(var s=i[n],a=0,l=e.code.length;a<l;a++){var _,c=!this.__dispatchKeyEvent(s,"keydown",e,a,t),d=!1;if(void 0!==e.composition&&(d=null===this.__compositionKey)&&(this.__compositionKey=e),null!==this.__compositionKey&&e.type===o.KeyType.CHARACTER&&!d)if(void 0===this.__compositionKey.composition[e.key[a]])if(this.__dispatchKeyEvent(s,"keypress",this.__compositionKey,0,t))void 0!==(_=this.__keyActions.KeyChar)&&(this.__isSuitableElement(s)?_.press(this.__compositionKey,s,0):_.press(this.__compositionKey,null,0));if(e.valid&&!c&&!d)if(e.type===o.KeyType.CHARACTER&&(c=!this.__dispatchKeyEvent(s,"keypress",e,a,t)),void 0!==(_=this.__keyActions[e.type===o.KeyType.CHARACTER?"KeyChar":e.key[a]||""])&&!c&&(this.__isSuitableElement(s)?_.press(e,s,a):_.press(e,null,a),e.type===o.KeyType.CHARACTER||e.type===o.KeyType.EDIT)){var u=void 0;"function"==typeof Event?u=new Event("input",{bubbles:!0}):(u=document.createEvent("event")).initEvent("input",!0,!1),s.dispatchEvent(u)}}}},o.prototype.__releaseKey=function(e){if(e.type===o.KeyType.LAYOUTSWITCH){if(null!==this.__layouts){var t=this.__layouts.layouts.filter(function(t){return t.name===e.layoutName})[0];void 0!==t&&this.__activateLayout(t)}}else if(e.type===o.KeyType.INDIRECTINPUT){if(this.__indirectInputElement)switch(e.component){case o.IndirectInputComponent.ACCEPT:this.__endIndirectInput();break;case o.IndirectInputComponent.CANCEL:this.__endIndirectInput(!0)}}else{this.__layouts&&this.__layouts.useIndirectInput&&this.__indirectInputElement&&document.activeElement!==this.__indirectInputElement&&this.__startIndirectInput();for(var i=this.__getTargetElements(),n=0,r=i.length;n<r;n++)for(var s=i[n],a=0,l=e.code.length;a<l;a++){var _=!this.__dispatchKeyEvent(s,"keyup",e,a);if(e.valid&&!_){var c=this.__keyActions[e.type===o.KeyType.CHARACTER?"KeyChar":e.key[a]||""];void 0!==c&&void 0!==c.release&&(this.__isSuitableElement(s)?c.release(e,s,a):c.release(e,null,a))}}}},o.prototype.__getKey=function(t){function i(e,t){if(void 0===e)return[];for(var o=0,i=e.indexOf(t,o+1),n=[];i>-1;)n.push(e.substring(o,i)),o=i+t.length,i=e.indexOf(t,o+1);return o<e.length&&n.push(e.substring(o)),n}var n=this.__keys.get(t);if(!n)throw new Error("Invalid key");if("layout-switch"===n.type)return{type:o.KeyType.LAYOUTSWITCH,layoutName:n.layoutName};if("indirect-input"===n.type){var r=e.ValueConverter.toEnum(n.component,o.IndirectInputComponent);if(null===r)throw new Error("Invalid value for component in indirect input definition");return{type:o.KeyType.INDIRECTINPUT,component:r}}var s={code:i(n.code,","),key:[],keyPath:[],unmodifiedKey:i(n.key,","),type:e.ValueConverter.toEnum(n.type,o.KeyType,o.KeyType.CHARACTER),mode:e.ValueConverter.toEnum(n.mode,o.KeyMode,o.KeyMode.NORMAL),location:(n.location||"").split(",").map(function(t){return e.ValueConverter.toEnum(t,o.KeyLocation,o.KeyLocation.STANDARD)}),active:t.classList.contains("active"),locked:t.classList.contains("locked"),noCapsLock:n.noCapsLock||!1,ignoreModifiers:n.ignoreModifiers||!1,valid:!0,longpressAction:e.ValueConverter.toEnum(n.longpressAction,o.LongpressAction,o.LongpressAction.NONE),specialCapslock:!1},path=[];if(!s.ignoreModifiers){if(this.__modifiers.Shift&&path.push("Shift"),this.__modifiers.Control&&path.push("Ctrl"),this.__modifiers.Alt&&path.push("Alt"),this.__modifiers.CapsLock&&!s.noCapsLock){if(n.capsLock){var a=path.join("")+"Key";a=a.substr(0,1).toLowerCase()+a.substr(1),void 0!==n.capsLock[a]&&(s.specialCapslock=!0)}s.specialCapslock||(-1===path.indexOf("Shift")?path.unshift("Shift"):path.shift())}this.__modifiers.NumLock&&Object.keys(n).filter(function(e){return 0===e.indexOf("numlock")}).length>0&&path.unshift("Numlock"),path.length>0&&(path[0]=path[0].toLowerCase())}var l=(s.specialCapslock?n.capsLock:n)[path.length>0?path.concat(["Type"]).join(""):"type"];void 0!==l&&path.length>0?s.type=e.ValueConverter.toEnum(l,o.KeyType,o.KeyType.CHARACTER):s.type!==o.KeyType.CHARACTER&&(path=[]);var _=(s.specialCapslock?n.capsLock:n)[path.length>0?path.concat(["Key"]).join(""):"key"],c=path.length>0?path.concat(["Composition"]).join(""):"composition";if(void 0!==(s.specialCapslock?n.capsLock:n)[c]&&(s.composition=e.ValueConverter.toObject((s.specialCapslock?n.capsLock:n)[c],void 0)),void 0===_&&(s.valid=!1,_=n.key),s.key=i(_,","),"Any"===s.key[0]&&(void 0===this.__getKey.__anyKey?(s.unmodifiedKey[0]=s.key[0]=String.fromCharCode(Math.floor(95*Math.random()+32)),this.__getKey.__anyKey=s.key[0]):(s.unmodifiedKey[0]=s.key[0]=this.__getKey.__anyKey,delete this.__getKey.__anyKey)),s.keyPath=path.length>0?path.concat(["Key"]):["key"],s.code.length>s.key.length?s.code.splice(s.key.length,s.code.length-s.key.length):s.key.length>s.code.length&&s.key.splice(s.code.length,s.key.length-s.code.length),s.location.length<s.code.length)for(var d=s.location.length,u=s.code.length;d<u;d++)s.location.push(o.KeyLocation.STANDARD);else s.location.length>s.code.length&&s.location.splice(s.code.length,s.location.length-s.code.length);return s},o.prototype.__getTargetElements=function(){if(this.__layouts&&this.__layouts.useIndirectInput&&this.__indirectInputElement)return[this.__indirectInputElement];if(this.__fixedTarget){var t=[];null!==this.__fixedTargetInputElements&&(t=t.concat(Array.prototype.slice.apply(this.__fixedTargetInputElements))),null!==this.__fixedTargetTextareaElements&&(t=t.concat(Array.prototype.slice.apply(this.__fixedTargetTextareaElements)));var o=e.Controls.get(this.__fixedTarget);return 0===t.length&&void 0!==o&&t.push(o.getElement()[0]),t}return document.activeElement?[document.activeElement]:[]},o.prototype.__dispatchKeyEvent=function(e,t,i,n,r){void 0===r&&(r=!1);var s,a={key:void 0!==i.composition&&"keypress"!==t?"Dead":i.key[n],code:i.code[n],location:i.location[n],shiftKey:this.__modifiers.Shift,ctrlKey:this.__modifiers.Control,altKey:this.__modifiers.Alt,metaKey:this.__modifiers.Meta,bubbles:!0,cancelable:!0,repeat:r};if(null!==this.__compositionKey&&void 0!==this.__compositionKey.composition[a.key]&&(a.key=this.__compositionKey.composition[a.key]),"keypress"===t&&i.type===o.KeyType.CHARACTER){if(void 0!==i.key[n]){var l=this.__specialKeys[i.key[n]],_=void 0!==l?l:i.key[n];_=this.__unescape(_),null!==this.__compositionKey&&void 0!==this.__compositionKey.composition[_]&&(_=this.__compositionKey.composition[_]),a.charCode=_.charCodeAt(0),a.keyCode=a.charCode,a.which=a.charCode}}else void 0!==this.__keyCodes[i.key[n]]?(a.keyCode=this.__keyCodes[i.key[n]],a.which=a.keyCode):i.type===o.KeyType.CHARACTER&&(void 0!==i.unmodifiedKey[n]?a.keyCode=this.__unescape(i.unmodifiedKey[n]).toUpperCase().charCodeAt(0):void 0!==i.key[n]&&(a.keyCode=this.__unescape(i.key[n]).toUpperCase().charCodeAt(0)),a.which=a.keyCode);if("function"==typeof KeyboardEvent)s=new KeyboardEvent(t,a);else{var c=[];a.altKey&&c.push("Alt"),a.altKey&&a.ctrlKey&&c.push("AltGraph"),this.__modifiers.CapsLock&&c.push("CapsLock"),a.ctrlKey&&c.push("Control"),a.metaKey&&c.push("Meta"),this.__modifiers.NumLock&&c.push("NumLock"),a.shiftKey&&c.push("Shift"),(s=document.createEvent("KeyboardEvent")).initKeyboardEvent(t,a.bubbles||!1,a.cancelable||!1,window,a.key||"",a.location||0,c.join(" "),a.repeat||!1,"")}return s.which!==a.which&&void 0!==a.which&&(Object.defineProperty(s,"which",{get:function(){return this.whichVal}}),s.whichVal=a.which,void 0!==a.charCode&&(Object.defineProperty(s,"charCode",{get:function(){return this.charCodeVal}}),s.charCodeVal=a.charCode),void 0!==a.keyCode&&(Object.defineProperty(s,"keyCode",{get:function(){return this.keyCodeVal}}),s.keyCodeVal=a.keyCode)),e.dispatchEvent(s)},o.prototype.__toggleModifier=function(e,t){this.__modifiers[e]=void 0===t?!this.__modifiers[e]:t,this.__updateActiveModifiers()},o.prototype.__updateActiveModifiers=function(){var e,t,o,i,n,r,s,a,l,_,c,d=[];if(this.__element[0].classList.forEach(function(e){-1!==e.indexOf("-active")&&d.push(e)}),(e=this.__element[0].classList).remove.apply(e,d),this.__shownLabels.forEach(function(e){return e.classList.remove("show")}),this.__hiddenLabels.forEach(function(e){return e.classList.remove("hide")}),this.__shownLabels=[],this.__hiddenLabels=[],this.__modifiers.Shift||this.__modifiers.Control||this.__modifiers.Alt||this.__modifiers.Meta||this.__modifiers.CapsLock){var u="";this.__modifiers.Shift&&(u+="shift"),this.__modifiers.Control&&this.__modifiers.Alt?u+="altgr":this.__modifiers.Control?u+="control":this.__modifiers.Alt&&(u+="alt"),this.__modifiers.Meta&&(u+="meta"),u.length>0&&this.__element[0].classList.add(u+"-active");var h=u.length>0?u:"default";if(this.__modifiers.CapsLock){this.__element[0].classList.add("capslock-active");var y=".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key.no-caps-lock .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-"+h,p=".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key.no-caps-lock .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-"+h,m=u;this.__modifiers.Shift?0===(m=m.replace("shift","")).length&&(m="default"):m="shift"+m,y+=", .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key:not(.no-caps-lock) .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-"+m,p+=", .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key:not(.no-caps-lock) .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-"+m,y+=", .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key:not(.no-caps-lock) .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-"+(u="capslock"+u),p+=", .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key:not(.no-caps-lock) .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-"+u,(i=this.__shownLabels).push.apply(i,Array.from(this.__elementPaddingContainer[0].querySelectorAll(y))),(n=this.__hiddenLabels).push.apply(n,Array.from(this.__elementPaddingContainer[0].querySelectorAll(p)))}else(r=this.__shownLabels).push.apply(r,Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-"+h))),(s=this.__hiddenLabels).push.apply(s,Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-"+h)))}else this.__element[0].classList.add("default-active"),(t=this.__shownLabels).push.apply(t,Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-default"))),(o=this.__hiddenLabels).push.apply(o,Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-default")));this.__modifiers.NumLock&&(this.__element[0].classList.add("numlock-active"),(a=this.__shownLabels).push.apply(a,Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-numlock"))),(l=this.__hiddenLabels).push.apply(l,Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-numlock")))),this.__modifiers.Insert&&(this.__element[0].classList.add("insert-active"),(_=this.__shownLabels).push.apply(_,Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-insert"))),(c=this.__hiddenLabels).push.apply(c,Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-insert")))),this.__shownLabels.forEach(function(e){return e.classList.add("show")}),this.__hiddenLabels.forEach(function(e){return e.classList.add("hide")})},o.prototype.__stickKey=function(e,t){if(void 0===t&&(t=!1),e.mode===o.KeyMode.STICKY){var i=this.__getStickiedKey(e,this.__stickiedKeys);void 0===i?((i=this.__keyToStickiedKey(e,t)).stickTime=Date.now(),this.__stickiedKeys.push(i)):i.locked=t,this.__keys.forEach(function(i,n){e.specialCapslock&&o.isStandardKeyDefinition(i)?i.capsLock&&i.capsLock[e.keyPath.join("")]===e.key.join(",")&&(n.classList.add("active"),n.classList.toggle("locked",t)):i[e.keyPath.join("")]===e.key.join(",")&&(n.classList.add("active"),n.classList.toggle("locked",t))})}},o.prototype.__unstickKey=function(e,t){if(void 0===t&&(t=!1),e.mode===o.KeyMode.STICKY){var i=this.__stickiedKeys.indexOf(e);if(-1===i)for(var n=0,r=this.__stickiedKeys.length;n<r;n++)if(this.__stickiedKeys[n].key.join(",")===e.key.join(",")&&this.__stickiedKeys[n].keyPath.join("-")===e.keyPath.join("-")){i=n;break}if(-1!==i)if(!this.__stickiedKeys[i].locked||t)return this.__releaseKey(this.__stickiedKeys[i]),this.__stickiedKeys.splice(i,1),this.__keys.forEach(function(t,i){e.specialCapslock&&o.isStandardKeyDefinition(t)?t.capsLock&&t.capsLock[e.keyPath.join("")]===e.key.join(",")&&i.classList.remove("active","locked"):t[e.keyPath.join("")]===e.key.join(",")&&i.classList.remove("active","locked")}),!0;return!1}},o.prototype.__unstickAllKeys=function(){if(!this.__releaseStickyKeysManually)for(var e=0,t=0,o=this.__stickiedKeys.length;t<o;t++){this.__unstickKey(this.__stickiedKeys[e])||e++}this.__keysToStick=[]},o.prototype.__getStickiedKey=function(e,t){return t.filter(function(t){return t.key.join(",")===e.key.join(",")&&t.keyPath.join("-")===e.keyPath.join("-")})[0]},o.prototype.__keyToStickiedKey=function(e,t){return{code:e.code,key:e.key,keyPath:e.keyPath,unmodifiedKey:e.unmodifiedKey,type:e.type,mode:e.mode,location:e.location,active:e.active,noCapsLock:e.noCapsLock,ignoreModifiers:e.ignoreModifiers,valid:e.valid,longpressAction:e.longpressAction,composition:e.composition,specialCapslock:e.specialCapslock,locked:t,stickTime:-1}},o.prototype.__caretPositionLeft=function(e,text,t){if(e<=0)return 0;if(this.__modifiers.Control&&!t){for(var o=/\b\S/g,i=o.exec(text),n=0;i&&!(i.index>=e);)n=i.index,i=o.exec(text);return n}if(1===e)return 0;var r=text.charCodeAt(e-1),s=text.charCodeAt(e-2);return r>=56320&&r<=57343&&s>=55296&&s<=56319?e-2:e-1},o.prototype.__caretPositionRight=function(e,text,t){if(e>=text.length)return text.length;if(this.__modifiers.Control&&!t){for(var o=/\S\s*\b/g,i=o.exec(text);i&&!(i.index+1>e);)i=o.exec(text);return null!==i?i.index+1:text.length}if(e===text.length-1)return text.length;var n=text.charCodeAt(e),r=text.charCodeAt(e+1);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+2:e+1},o.prototype.__moveCaret=function(t,o,i,n){var r=this.__getSelectionStartOrEnd(t,"selectionStart"),s=this.__getSelectionStartOrEnd(t,"selectionEnd");if(this.__modifiers.Shift&&!n){if(r===s||t.selectionDirection===o){"forward"===o?this.__setSelectionStartOrEnd(t,"selectionEnd",i(s)):this.__setSelectionStartOrEnd(t,"selectionStart",i(r));try{t.selectionDirection=o}catch(t){e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+'] Tried to set selectionDirection on an input element that does not support this. Try using an <input type="text" /> element.')}}else{var a;if("forward"===o)if((a=i(r))<s)this.__setSelectionStartOrEnd(t,"selectionStart",a);else{this.__setSelectionStartOrEnd(t,"selectionStart",s),this.__setSelectionStartOrEnd(t,"selectionEnd",a);try{t.selectionDirection=o}catch(t){e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+'] Tried to set selectionDirection on an input element that does not support this. Try using an <input type="text" /> element.')}}else if((a=i(s))>=r)this.__setSelectionStartOrEnd(t,"selectionEnd",a);else{this.__setSelectionStartOrEnd(t,"selectionEnd",r),this.__setSelectionStartOrEnd(t,"selectionStart",a);try{t.selectionDirection=o}catch(t){e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+'] Tried to set selectionDirection on an input element that does not support this. Try using an <input type="text" /> element.')}}}this.__scrollCaretIntoViewbox(t)}else this.__setCaretPosition(t,i(r))},o.prototype.__setCaretPosition=function(t,o){this.__setSelectionStartOrEnd(t,"selectionStart",o),this.__setSelectionStartOrEnd(t,"selectionEnd",o);try{t.selectionDirection="forward"}catch(t){e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+'] Tried to set selectionDirection on an input element that does not support this. Try using an <input type="text" /> element.')}this.__scrollCaretIntoViewbox(t)},o.prototype.__setSelectionStartOrEnd=function(t,o,i){if(i<0?i=0:i>t.value.length&&(i=t.value.length),t[o]!==i)try{t[o]=i}catch(t){e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+'] Tried to set selection or caret position on an input element that does not support this. Try using an <input type="text" /> element.')}},o.prototype.__getSelectionStartOrEnd=function(e,t){var o=e[t]||0;return o<0?o=0:o>e.value.length&&(o=e.value.length),o},o.prototype.__scrollCaretIntoViewbox=function(e){var t="backward"===e.selectionDirection?this.__getSelectionStartOrEnd(e,"selectionStart"):this.__getSelectionStartOrEnd(e,"selectionEnd"),o=this.__getMirrorElement(e),i=this.__getCaretCoordinates(o,e.value,t);o.style.width="auto",o.style.height="auto",o.style.padding="",o.style.overflow="hidden",o.textContent=".";var n=o.clientHeight;o.parentNode.removeChild(o);var r=window.getComputedStyle(e),s=parseInt(r.paddingTop||"0",10),a=parseInt(r.paddingRight||"0",10),l=parseInt(r.paddingBottom||"0",10),_=parseInt(r.paddingLeft||"0",10);i.left<e.scrollLeft+_?e.scrollLeft=i.left-_:i.left+1>e.scrollLeft+e.clientWidth-_-a&&(e.scrollLeft=i.left+1-(e.clientWidth-_-a)),i.top<e.scrollTop+s?e.scrollTop=i.top-s:i.top+n>e.scrollTop+e.clientHeight-s-l&&(e.scrollTop=i.top+n-(e.clientHeight-s-l))},o.prototype.__getMirrorElement=function(e){var t=document.createElement("div"),o=t.style,i=window.getComputedStyle(e);return o.position="absolute",o.visibility="hidden",["whiteSpace","wordWrap","direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"].forEach(function(e){o[e]=i[e]}),null!==window.mozInnerScreenX?e.scrollHeight>parseInt(i.height||"0",10)&&(o.overflowY="scroll"):o.overflow="hidden",document.body.appendChild(t),t},o.prototype.__getCaretCoordinates=function(e,text,t){var o=e.getElementsByTagName("span")[0]||document.createElement("span");return e.textContent=text.substring(0,t).replace(/  /g,"  "),o.textContent=text.substring(t)||".",e.appendChild(o),{top:o.offsetTop,left:o.offsetLeft}},o.prototype.__unescape=function(e){return e.replace(/\\b/g,"\b").replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\r/g,"\r").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\")},o.prototype.__isSuitableElement=function(e){return e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&-1!==["password","search","tel","text","url"].indexOf(e.type)},o.prototype.__mapLayoutNameToLayoutFileName=function(e){var t="";switch(e){case"DE-DE_QWERTZ_full":t="German - with NumPad";break;case"DE-DE_QWERTZ_standard":t="German - basic";break;case"EN-US_QWERTY_full":t="US - with NumPad";break;case"EN-US_QWERTY_standard":t="US - basic";break;case"DE-DE_QWERTZ_compact":t="German - compact";break;case"EN-US_QWERTY_compact":t="US - compact";break;case"Calculator":case"Numpad":case"PINpad":t=e;break;default:return null}return"KeyboardLayouts/"+t+".keyboard.json"},o.prototype.setLayout=function(valueNew){var t=e.ValueConverter.toString(valueNew),o=this.__mapLayoutNameToLayoutFileName(t);if(null!==o)return this.setLayoutFile(o)},o.prototype.getLayout=function(){return null},o.prototype.setLayoutFile=function(valueNew){var t=e.ValueConverter.toString(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LayoutFile")),t!==this.__layoutFile&&(this.__layoutFile=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getLayoutFile"]),this.__processLayoutFile())},o.prototype.getLayoutFile=function(){return this.__layoutFile},o.prototype.__processLayoutFile=function(){var t=this;if(this.__layoutFile){if(TCHMI_DESIGNER){var o=this.__elementPaddingContainer[0].querySelector(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-designer-info");o&&o.remove()}this.__layoutFileXhr&&this.__layoutFileXhr.abort();var i=new XMLHttpRequest;this.__layoutFileXhr=i,i.open("GET",tchmi_path(this.__layoutFile),!0),i.addEventListener("load",function(o){200===i.status?(t.__layouts=e.ValueConverter.toObject(i.responseText),t.__processLayoutJsonFile()):(e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+t.getId()+', Attribute=LayoutPath] Loading layout file "'+t.__layoutFile+'" failed with status='+i.status+"."),t.__layouts=null,t.__elementPaddingContainer[0].innerText=""),t.__layoutFileXhr=void 0}),i.addEventListener("error",function(o){e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+t.getId()+', Attribute=LayoutPath] Loading layout file "'+t.__layoutFile+'" failed with status='+i.status+"."),t.__layouts=null,t.__layoutFileXhr=void 0}),i.send()}else TCHMI_DESIGNER?this.__elementPaddingContainer[0].innerHTML='<div class="TcHmi_Controls_Beckhoff_TcHmiKeyboard-designer-info" style="font-style:italic;">No configured LayoutFile.<br>Please add a LayoutFile to the Project and set the LayoutFile Attribute.<div>':this.__elementPaddingContainer[0].innerText=""},o.prototype.__processLayoutJsonFile=function(){if(null!==this.__layouts){Array.isArray(this.__layouts.layouts)&&0!==this.__layouts.layouts.length||e.Log.error("Loading layout in control "+this.__id+' failed. Invalid layout file: "layouts" property is missing or empty!');var t=this.__layouts.layouts.filter(function(e){return!!e.name&&"string"==typeof e.name&&"default"===e.name.toLowerCase()});t.length>0?this.__activateLayout(t[0]):this.__activateLayout(this.__layouts.layouts[0]),this.__indirectInputElement&&!this.__layouts.useIndirectInput&&(this.__indirectInputElement.remove(),this.__indirectInputElement=null)}},o.prototype.__activateLayout=function(t){if(Array.isArray(t.keys)){this.__keys.clear(),this.__additionalKeys.clear();for(var o=document.createDocumentFragment(),i=!1,n=!1,r=0,s=t.keys.length;r<s;r++){var a=t.keys[r];if("indirect-input"===a.type)switch(a.component){case"textbox":i=!0;break;case"accept":n=!0}var l=this.__createKey(a);l&&!l.parentElement&&o.appendChild(l)}this.__layouts&&this.__layouts.useIndirectInput?(i||e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+'] Layout has "useIndirectInput" = true, but is missing the textbox.'),n||e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+'] Layout has "useIndirectInput" = true, but is missing the accept key.')):(i||n)&&e.Log.warn("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+'] Layout contains elements for indirect input, but has "useIndirectInput" not set to true.');for(r=this.__elementPaddingContainer[0].childElementCount-1;r>=0;r--){var _=this.__elementPaddingContainer[0].children.item(r);_ instanceof HTMLDivElement&&_.remove()}this.__elementPaddingContainer[0].appendChild(o),this.__currentLayout=t,this.__updateActiveModifiers(),this.__processScaleMode(),this.__processKeyPadding(),this.__processAdditionalKeyBackdropPadding(),this.__processLabelFontFamily(),this.__processLabelFontSize(),this.__processLabelFontStyle(),this.__processLabelFontWeight(),this.__processLabelStrokeThickness(),this.__processLabelStrokeColor(),this.__processLabelFillColor(),this.__processLabelColor(),this.__processKeyBackgroundColor(),this.__processAdditionalKeyBackdropColor()}else e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Activating layout failed. Missing property=keys.")},o.prototype.__createKey=function(t){if(this.__layouts&&(this.__layouts.useIndirectInput||"indirect-input"!==t.type))if(void 0!==t.geometry&&null!==t.geometry)if(void 0!==t.geometry.top&&null!==t.geometry.top)if(void 0!==t.geometry.left&&null!==t.geometry.left)if(void 0!==t.geometry.width&&null!==t.geometry.width){if(void 0!==t.geometry.height&&null!==t.geometry.height){if("layout-switch"===t.type){if(void 0===t.layoutName||null===t.layoutName)return void e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=layoutName.")}else if("indirect-input"===t.type){if(void 0===t.component||null===t.component)return void e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=component.")}else{if(void 0===t.code||null===t.code)return void e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=code.");if(void 0===t.key||null===t.key)return void e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=key.")}var i;if("indirect-input"===t.type&&"textbox"===t.component){if(this.__updateIndirectInputElement(t),!this.__indirectInputElement)throw new Error("Could not create textbox for indirect input.");i=this.__indirectInputElement}else{if((i=document.createElement("div")).classList.add("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),i.classList.add("tchmi-keyboard-template-key"),o.isStandardKeyDefinition(t)&&(t.noCapsLock&&i.classList.add("no-caps-lock"),t.additionalKeys)){var n=document.createElement("div");n.classList.add("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-additional-keys-container");for(var r=0,s=t.additionalKeys.length;r<s;r++){var a=this.__createKey(t.additionalKeys[r]);if(void 0===a)return;a.classList.add("additional-key"),n.appendChild(a)}var l=Math.min.apply(Math,t.additionalKeys.map(function(e){return e.geometry.top})),_=Math.min.apply(Math,t.additionalKeys.map(function(e){return e.geometry.left})),c=Math.max.apply(Math,t.additionalKeys.map(function(e){return e.geometry.left+e.geometry.width-_})),d=Math.max.apply(Math,t.additionalKeys.map(function(e){return e.geometry.top+e.geometry.height-l})),u=document.createElement("div");u.classList.add("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-backdrop"),u.classList.add("tchmi-keyboard-template-backdrop"),u.style.top=l+"%",u.style.left=_+"%",u.style.width=c+"%",u.style.height=d+"%",n.insertAdjacentElement("afterbegin",u),i.appendChild(n),this.__additionalKeys.set(i,n)}if(Array.isArray(t.labels))for(var h=function(o,n){var r=t.labels[o],s=document.createElement("span");if(s.classList.add("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label"),s.classList.add("tchmi-keyboard-template-label"),void 0!==r.position&&null!==r.position&&r.position.length>0&&r.position.split(" ").forEach(function(e){return s.classList.add(e)}),"text"===r.type&&void 0!==r.text&&null!==r.text)s.textContent=r.text;else if("svg"===r.type&&void 0!==r.svg&&null!==r.svg)s.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="'+r.svg.dimensions.width+'" height="'+r.svg.dimensions.height+'"><path d="'+r.svg.path+'"></path></svg>';else if("image"===r.type&&void 0!==r.image&&null!==r.image){var a={color:null,image:r.image.source,imageWidth:void 0!==r.image.dimensions?r.image.dimensions.width:null,imageWidthUnit:"px",imageHeight:void 0!==r.image.dimensions?r.image.dimensions.height:null,imageHeightUnit:"px",imageHorizontalAlignment:"Center",imageVerticalAlignment:"Center",imagePadding:null};e.StyleProvider.processBackground(s,a)}if(void 0!==r.visible&&r.visible.length>0)for(var l=0,_=r.visible.length;l<_;l++)s.classList.add("show-"+r.visible[l]);else s.classList.add("show-always");if(void 0!==r.hidden)for(l=0,_=r.hidden.length;l<_;l++)s.classList.add("hide-"+r.hidden[l]);i.appendChild(s)},y=0,p=t.labels.length;y<p;y++)h(y)}return i.style.top=t.geometry.top+"%",i.style.left=t.geometry.left+"%",i.style.width=t.geometry.width+"%",i.style.height=t.geometry.height+"%",o.isStandardKeyDefinition(t)&&!0===this.__modifiers[t.key]&&i.classList.add("active"),this.__keys.set(i,t),i}e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=geometry.height.")}else e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=geometry.width.");else e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=geometry.left.");else e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=geometry.top.");else e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=geometry.")},o.prototype.__updateIndirectInputElement=function(e,t){if(void 0===t&&(t=!1),"textbox"===e.component&&(0!==this.__activeElements.length||!this.__indirectInputElement)){for(var o=this.__activeElements.length>0,i=0,n=this.__activeElements.length;i<n;i++)if(!(this.__activeElements[i]instanceof HTMLTextAreaElement)){o=!1;break}if(!this.__indirectInputElement||o&&this.__indirectInputElement instanceof HTMLInputElement||!o&&this.__indirectInputElement instanceof HTMLTextAreaElement){var r=this.__indirectInputElement;this.__indirectInputElement=o?document.createElement("textarea"):document.createElement("input"),this.__indirectInputElement.classList.add("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-textbox"),this.__indirectInputElement.style.top=e.geometry.top+"%",this.__indirectInputElement.style.left=e.geometry.left+"%",this.__indirectInputElement.style.width=e.geometry.width+"%",this.__indirectInputElement.style.height=e.geometry.height+"%",this.__processIndirectInputHorizontalAlignment(),this.__processIndirectInputFontSize(),this.__processIndirectInputPadding(),t&&(r&&r.parentElement===this.__elementPaddingContainer[0]?this.__elementPaddingContainer[0].replaceChild(this.__indirectInputElement,r):this.__elementPaddingContainer[0].appendChild(this.__indirectInputElement))}}},o.prototype.setScaleMode=function(valueNew){var t=e.ValueConverter.toScaleModeString(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("ScaleMode")),t!==this.__scaleMode&&(this.__scaleMode=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getScaleMode"]),this.__processScaleMode())},o.prototype.getScaleMode=function(){return this.__scaleMode},o.prototype.__processScaleMode=function(){if(void 0!==this.__scaleMode)if("ScaleToFill"!==this.__scaleMode&&"None"!==this.__scaleMode){var t=this.getRenderedWidth();if(t){var o=this.getRenderedHeight();if(o){if(this.__keyboardPadding){var i=t,n=function(e,t,o){return"%"===t?e/100*o:e};t-=n(this.__keyboardPadding.left,this.__keyboardPadding.leftUnit,i),t-=n(this.__keyboardPadding.right,this.__keyboardPadding.rightUnit,i),o-=n(this.__keyboardPadding.top,this.__keyboardPadding.topUnit,i),o-=n(this.__keyboardPadding.bottom,this.__keyboardPadding.bottomUnit,i)}switch(this.__scaleMode){case"ScaleToFit":var r=t/this.__currentLayout.dimensions.width,s=o/this.__currentLayout.dimensions.height,a=r<s?r:s;e.StyleProvider.setSimpleElementStyle(this.__elementPaddingContainer,{width:this.__currentLayout.dimensions.width*a+"px",height:this.__currentLayout.dimensions.height*a+"px","min-width":this.__currentLayout.dimensions.width*a+"px","min-height":this.__currentLayout.dimensions.height*a+"px"});break;case"ScaleToFitWidth":a=t/this.__currentLayout.dimensions.width,e.StyleProvider.setSimpleElementStyle(this.__elementPaddingContainer,{width:this.__currentLayout.dimensions.width*a+"px",height:this.__currentLayout.dimensions.height*a+"px","min-width":this.__currentLayout.dimensions.width*a+"px","min-height":this.__currentLayout.dimensions.height*a+"px"});break;case"ScaleToFitHeight":a=o/this.__currentLayout.dimensions.height,e.StyleProvider.setSimpleElementStyle(this.__elementPaddingContainer,{width:this.__currentLayout.dimensions.width*a+"px",height:this.__currentLayout.dimensions.height*a+"px","min-width":this.__currentLayout.dimensions.width*a+"px","min-height":this.__currentLayout.dimensions.height*a+"px"})}}}}else switch(this.__scaleMode){case"ScaleToFill":e.StyleProvider.setSimpleElementStyle(this.__elementPaddingContainer,{width:null,height:null,"min-width":null,"min-height":null});break;case"None":e.StyleProvider.setSimpleElementStyle(this.__elementPaddingContainer,{width:this.__currentLayout.dimensions.width+"px",height:this.__currentLayout.dimensions.height+"px","min-width":this.__currentLayout.dimensions.width+"px","min-height":this.__currentLayout.dimensions.height+"px"})}},o.prototype.setFixedTarget=function(valueNew){var t=e.ValueConverter.toString(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("FixedTarget")),t!==this.__fixedTarget&&(this.__fixedTarget=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getFixedTarget"]),this.__processFixedTarget())},o.prototype.getFixedTarget=function(){return this.__fixedTarget},o.prototype.__processFixedTarget=function(){var t=this,o=!1;if(this.__fixedTarget){var i=e.Controls.get(this.__fixedTarget);if(i){var n=i.getElement()[0];if(this.__fixedTargetInputElements=n.getElementsByTagName("input"),this.__fixedTargetTextareaElements=n.getElementsByTagName("textarea"),this.__layouts&&this.__layouts.useIndirectInput){o=!0;var r=function(){var e=[];null!==t.__fixedTargetInputElements&&(e=e.concat(Array.from(t.__fixedTargetInputElements))),null!==t.__fixedTargetTextareaElements&&(e=e.concat(Array.from(t.__fixedTargetTextareaElements))),t.__setActiveElements(e)};this.__fixedTargetObserver=new MutationObserver(r),this.__fixedTargetObserver.observe(n,{childList:!0,subtree:!0}),r()}}else this.__fixedTargetInputElements=null,this.__fixedTargetTextareaElements=null}else this.__fixedTargetInputElements=null,this.__fixedTargetTextareaElements=null;this.__fixedTargetObserver&&!o&&(this.__fixedTargetObserver.disconnect(),this.__fixedTargetObserver=null)},o.prototype.setReleaseStickyKeysManually=function(valueNew){var t=e.ValueConverter.toBoolean(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("ReleaseStickyKeysManually")),t!==this.__releaseStickyKeysManually&&(this.__releaseStickyKeysManually=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getReleaseStickyKeysManually"]),this.__processReleaseStickyKeysManually())},o.prototype.getReleaseStickyKeysManually=function(){return this.__releaseStickyKeysManually},o.prototype.__processReleaseStickyKeysManually=function(){},o.prototype.__raiseKeyPressStarted=function(t){var i,n=this.__interactedKeys.filter(function(e){return e.element===t})[0];if(i=void 0!==n?n.key:this.__getKey(t),o.isStandardKey(i)){for(var r=[],s=0,a=Math.min(i.code.length,i.key.length,i.location.length);s<a;s++)r.push({element:t,key:{code:i.code[s],key:i.key[s],unmodifiedKey:i.unmodifiedKey[s],location:o.KeyLocation[i.location[0]].toLowerCase()}});this.__pressedKeys=this.__pressedKeys.concat(r),e.EventProvider.raise(this.__id+".onKeyPressStarted",r),e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getPressedKeys"])}},o.prototype.__raiseKeyPressEnded=function(t,o){var i=this.__pressedKeys.filter(function(e){return e.element===t});0!==i.length&&(this.__pressedKeys=this.__pressedKeys.filter(function(e){return e.element!==t}),e.EventProvider.raise(this.__id+".onKeyPress"+o,i),e.EventProvider.raise(this.__id+".onKeyPressEnded",i),e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getPressedKeys"]))},o.prototype.__setActiveElements=function(e){if(this.__indirectInputElement)if(this.__activeElements=e,0===e.length)this.__indirectInputElement.value="";else{var t=this.__keys.get(this.__indirectInputElement);t&&"indirect-input"===t.type&&(this.__keys.delete(this.__indirectInputElement),this.__updateIndirectInputElement(t,!0),this.__keys.set(this.__indirectInputElement,t));for(var text="",o=0,i=this.__activeElements.length;o<i;o++)if(0===o)text=this.__activeElements[o].value;else if(this.__activeElements[o].value!==text){text="";break}this.__indirectInputElement.value=text}},o.prototype.__startIndirectInput=function(){if(this.__indirectInputElement){this.__indirectInputElement.focus();for(var e=null,t=null,o=null,i=0,n=this.__activeElements.length;i<n;i++)if(0===i)e=this.__activeElements[i].selectionStart,t=this.__activeElements[i].selectionEnd,o=this.__activeElements[i].selectionDirection;else if(this.__activeElements[i].selectionStart!==e||this.__activeElements[i].selectionEnd!==t||this.__activeElements[i].selectionDirection!==o){e=null,t=null,o=null;break}this.__indirectInputElement.selectionStart=null!==e?e:this.__indirectInputElement.value.length,this.__indirectInputElement.selectionEnd=null!==t?t:this.__indirectInputElement.value.length,this.__indirectInputElement.selectionDirection=null!==o?o:"forward"}},o.prototype.__endIndirectInput=function(t){if(void 0===t&&(t=!1),this.__indirectInputElement){var o=this.__indirectInputElement.value;if(t){var text="";for(s=0,a=this.__activeElements.length;s<a;s++)if(0===s)text=this.__activeElements[s].value;else if(this.__activeElements[s].value!==text){text="";break}this.__indirectInputElement.value=text}else for(var i=this.__indirectInputElement.selectionStart,n=this.__indirectInputElement.selectionEnd,r=this.__indirectInputElement.selectionDirection,s=0,a=this.__activeElements.length;s<a;s++){this.__activeElements[s].value=o;try{this.__activeElements[s].selectionStart=null!==i?i:this.__activeElements[s].value.length,this.__activeElements[s].selectionEnd=null!==n?n:this.__activeElements[s].value.length,this.__activeElements[s].selectionDirection=null!==r?r:"forward"}catch(e){}}1===this.__activeElements.length&&this.__activeElements[0].focus(),e.EventProvider.raise(this.__id+(t?".onIndirectInputCanceled":".onIndirectInputAccepted"),o)}},o.prototype.getPressedKeys=function(){return this.__pressedKeys.map(function(e){return e.key})},o.prototype.setLongpressDelay=function(valueNew){var t=e.ValueConverter.toNumber(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LongpressDelay")),t!==this.__longpressDelay&&(this.__longpressDelay=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getLongpressDelay"]),this.__processLongpressDelay())},o.prototype.getLongpressDelay=function(){return this.__longpressDelay},o.prototype.__processLongpressDelay=function(){},o.prototype.setRepetitionDelay=function(valueNew){var t=e.ValueConverter.toNumber(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("RepetitionDelay")),t!==this.__repetitionDelay&&(this.__repetitionDelay=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRepetitionDelay"]),this.__processRepetitionDelay())},o.prototype.getRepetitionDelay=function(){return this.__repetitionDelay},o.prototype.__processRepetitionDelay=function(){},o.prototype.setIndirectInputHorizontalAlignment=function(valueNew){var t=e.ValueConverter.toHorizontalAlignment(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("IndirectInputHorizontalAlignment")),t!==this.__indirectInputHorizontalAlignment&&(this.__indirectInputHorizontalAlignment=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getIndirectInputHorizontalAlignment"]),this.__processIndirectInputHorizontalAlignment())},o.prototype.getIndirectInputHorizontalAlignment=function(){return this.__indirectInputHorizontalAlignment},o.prototype.__processIndirectInputHorizontalAlignment=function(){void 0!==this.__indirectInputHorizontalAlignment&&this.__indirectInputElement&&(this.__indirectInputElement.style.textAlign=this.__indirectInputHorizontalAlignment.toLowerCase())},o.prototype.setIndirectInputFontSize=function(valueNew){var t=e.ValueConverter.toNumber(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("IndirectInputFontSize")),t!==this.__indirectInputFontSize&&(this.__indirectInputFontSize=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getIndirectInputFontSize"]),this.__processIndirectInputFontSize())},o.prototype.getIndirectInputFontSize=function(){return this.__indirectInputFontSize},o.prototype.__processIndirectInputFontSize=function(){void 0!==this.__indirectInputFontSize&&this.__indirectInputElement&&(null!==this.__indirectInputFontSize?this.__indirectInputElement.style.fontSize=this.__indirectInputFontSize+(this.__indirectInputFontSizeUnit||"px"):this.__indirectInputElement.style.fontSize="")},o.prototype.setIndirectInputFontSizeUnit=function(valueNew){var t=e.ValueConverter.toDimensionUnit(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("IndirectInputFontSizeUnit")),t!==this.__indirectInputFontSizeUnit&&(this.__indirectInputFontSizeUnit=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getIndirectInputFontSizeUnit"]),this.__processIndirectInputFontSizeUnit())},o.prototype.getIndirectInputFontSizeUnit=function(){return this.__indirectInputFontSizeUnit},o.prototype.__processIndirectInputFontSizeUnit=function(){this.__processIndirectInputFontSize()},o.prototype.setIndirectInputPadding=function(valueNew){var t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("IndirectInputPadding"));var o=this.__objectResolvers.get("indirectInputPadding");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var i=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("indirectInputPadding",{resolver:i,watchCallback:this.__onResolverForIndirectInputPaddingWatchCallback,watchDestroyer:i.watch(this.__onResolverForIndirectInputPaddingWatchCallback)})},o.prototype.getIndirectInputPadding=function(){return this.__indirectInputPadding},o.prototype.__processIndirectInputPadding=function(){void 0!==this.__indirectInputPadding&&this.__indirectInputElement&&e.StyleProvider.processContentPadding(this.__indirectInputElement,this.__indirectInputPadding)},o.prototype.setKeyboardPadding=function(valueNew){var t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("KeyboardPadding"));var o=this.__objectResolvers.get("keyboardPadding");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var i=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("keyboardPadding",{resolver:i,watchCallback:this.__onResolverForKeyboardPaddingWatchCallback,watchDestroyer:i.watch(this.__onResolverForKeyboardPaddingWatchCallback)})},o.prototype.getKeyboardPadding=function(){return this.__keyboardPadding},o.prototype.__processKeyboardPadding=function(){e.StyleProvider.processContentPadding(this.__elementTemplateRoot,this.__keyboardPadding),this.__processScaleMode()},o.prototype.setKeyPadding=function(valueNew){var t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("KeyPadding"));var o=this.__objectResolvers.get("keyPadding");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var i=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("keyPadding",{resolver:i,watchCallback:this.__onResolverForKeyPaddingWatchCallback,watchDestroyer:i.watch(this.__onResolverForKeyPaddingWatchCallback)})},o.prototype.getKeyPadding=function(){return this.__keyPadding},o.prototype.__processKeyPadding=function(){var t=this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label"),o=["top","right","bottom","left"];if(this.__keyPadding)for(r=0,s=o.length;r<s;r++){var i=this.__keyPadding[o[r]],n=this.__keyPadding[o[r]+"Unit"]||"px";null==i?e.StyleProvider.setSimpleElementStyle(t,o[r],null):e.StyleProvider.setSimpleElementStyle(t,o[r],i+n)}else for(var r=0,s=o.length;r<s;r++)e.StyleProvider.setSimpleElementStyle(t,o[r],null)},o.prototype.setAdditionalKeyBackdropPadding=function(valueNew){var t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("AdditionalKeyBackdropPadding"));var o=this.__objectResolvers.get("additionalKeyBackdropPadding");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var i=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("additionalKeyBackdropPadding",{resolver:i,watchCallback:this.__onResolverForAdditionalKeyBackdropPaddingWatchCallback,watchDestroyer:i.watch(this.__onResolverForAdditionalKeyBackdropPaddingWatchCallback)})},o.prototype.getAdditionalKeyBackdropPadding=function(){return this.__additionalKeyBackdropPadding},o.prototype.__processAdditionalKeyBackdropPadding=function(){var t=Array.from(this.__additionalKeys.values()).map(function(e){return e.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-backdrop")[0]});e.StyleProvider.processContentPadding(t,this.__additionalKeyBackdropPadding),this.__additionalKeyBackdropPadding?e.StyleProvider.processTransform(t,{transformType:"Translate",x:-(this.__additionalKeyBackdropPadding.left||0),xUnit:this.__additionalKeyBackdropPadding.leftUnit||"px",y:-(this.__additionalKeyBackdropPadding.top||0),yUnit:this.__additionalKeyBackdropPadding.topUnit||"px"}):e.StyleProvider.processTransform(t,null)},o.prototype.setLabelFontSize=function(valueNew){var t=e.ValueConverter.toNumber(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelFontSize")),t!==this.__labelFontSize&&(this.__labelFontSize=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getLabelFontSize"]),this.__processLabelFontSize())},o.prototype.getLabelFontSize=function(){return this.__labelFontSize},o.prototype.__processLabelFontSize=function(){e.StyleProvider.processFontSize(this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),this.__labelFontSize,this.__labelFontSizeUnit)},o.prototype.setLabelFontSizeUnit=function(valueNew){var t=e.ValueConverter.toFontSizeUnit(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelFontSizeUnit")),t!==this.__labelFontSizeUnit&&(this.__labelFontSizeUnit=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getLabelFontSizeUnit"]),this.__processLabelFontSizeUnit())},o.prototype.getLabelFontSizeUnit=function(){return this.__labelFontSizeUnit},o.prototype.__processLabelFontSizeUnit=function(){this.__processLabelFontSize()},o.prototype.setLabelFontFamily=function(valueNew){var t=e.ValueConverter.toString(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelFontFamily")),t!==this.__labelFontFamily&&(this.__labelFontFamily=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getLabelFontFamily"]),this.__processLabelFontFamily())},o.prototype.getLabelFontFamily=function(){return this.__labelFontFamily},o.prototype.__processLabelFontFamily=function(){e.StyleProvider.processFontFamily(this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),this.__labelFontFamily)},o.prototype.setLabelFontStyle=function(valueNew){var t=e.ValueConverter.toFontStyle(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelFontStyle")),t!==this.__labelFontStyle&&(this.__labelFontStyle=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getLabelFontStyle"]),this.__processLabelFontStyle())},o.prototype.getLabelFontStyle=function(){return this.__labelFontStyle},o.prototype.__processLabelFontStyle=function(){e.StyleProvider.processFontStyle(this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),this.__labelFontStyle)},o.prototype.setLabelFontWeight=function(valueNew){var t=e.ValueConverter.toFontWeight(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelFontWeight")),t!==this.__labelFontWeight&&(this.__labelFontWeight=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getLabelFontWeight"]),this.__processLabelFontWeight())},o.prototype.getLabelFontWeight=function(){return this.__labelFontWeight},o.prototype.__processLabelFontWeight=function(){e.StyleProvider.processFontWeight(this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),this.__labelFontWeight)},o.prototype.setLabelStrokeThickness=function(valueNew){var t=e.ValueConverter.toNumber(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelStrokeThickness")),t!==this.__labelStrokeThickness&&(this.__labelStrokeThickness=t,e.EventProvider.raise(this.__id+".onFunctionResultChanged",["getLabelStrokeThickness"]),this.__processLabelStrokeThickness())},o.prototype.getLabelStrokeThickness=function(){return this.__labelStrokeThickness},o.prototype.__processLabelStrokeThickness=function(){e.StyleProvider.setSimpleElementStyle(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label svg"),"stroke-width",this.__labelStrokeThickness+"px")},o.prototype.setKeyBackgroundColor=function(valueNew){var t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("KeyBackgroundColor"));var o=this.__objectResolvers.get("keyBackgroundColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var i=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("keyBackgroundColor",{resolver:i,watchCallback:this.__onResolverForKeyBackgroundColorWatchCallback,watchDestroyer:i.watch(this.__onResolverForKeyBackgroundColorWatchCallback)})},o.prototype.getKeyBackgroundColor=function(){return this.__keyBackgroundColor},o.prototype.__processKeyBackgroundColor=function(){e.StyleProvider.processBackgroundColor(this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),this.__keyBackgroundColor)},o.prototype.setLabelColor=function(valueNew){var t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelColor"));var o=this.__objectResolvers.get("labelColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var i=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("labelColor",{resolver:i,watchCallback:this.__onResolverForLabelColorWatchCallback,watchDestroyer:i.watch(this.__onResolverForLabelColorWatchCallback)})},o.prototype.getLabelColor=function(){return this.__labelColor},o.prototype.__processLabelColor=function(){e.StyleProvider.processTextColor(this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),this.__labelColor)},o.prototype.setLabelStrokeColor=function(valueNew){var t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelStrokeColor"));var o=this.__objectResolvers.get("labelStrokeColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var i=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("labelStrokeColor",{resolver:i,watchCallback:this.__onResolverForLabelStrokeColorWatchCallback,watchDestroyer:i.watch(this.__onResolverForLabelStrokeColorWatchCallback)})},o.prototype.getLabelStrokeColor=function(){return this.__labelStrokeColor},o.prototype.__processLabelStrokeColor=function(){e.StyleProvider.processStrokeColor(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label svg"),this.__labelStrokeColor)},o.prototype.setLabelFillColor=function(valueNew){var t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelFillColor"));var o=this.__objectResolvers.get("labelFillColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var i=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("labelFillColor",{resolver:i,watchCallback:this.__onResolverForLabelFillColorWatchCallback,watchDestroyer:i.watch(this.__onResolverForLabelFillColorWatchCallback)})},o.prototype.getLabelFillColor=function(){return this.__labelFillColor},o.prototype.__processLabelFillColor=function(){e.StyleProvider.processFillColor(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label svg path"),this.__labelFillColor)},o.prototype.setAdditionalKeyBackdropColor=function(valueNew){var t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("AdditionalKeyBackdropColor"));var o=this.__objectResolvers.get("additionalKeyBackdropColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var i=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("additionalKeyBackdropColor",{resolver:i,watchCallback:this.__onResolverForAdditionalKeyBackdropColorWatchCallback,watchDestroyer:i.watch(this.__onResolverForAdditionalKeyBackdropColorWatchCallback)})},o.prototype.getAdditionalKeyBackdropColor=function(){return this.__additionalKeyBackdropColor},o.prototype.__processAdditionalKeyBackdropColor=function(){e.StyleProvider.processBackgroundColor(Array.from(this.__additionalKeys.values()).map(function(e){return e.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-backdrop")[0]}),this.__additionalKeyBackdropColor)},o}(e.Controls.System.TcHmiControl);t.TcHmiKeyboard=o,function(e){var t;e.isStandardKeyDefinition=function(e){return"layout-switch"!==e.type&&"indirect-input"!==e.type},e.isStandardKey=function(e){return e.type!==t.LAYOUTSWITCH&&e.type!==t.INDIRECTINPUT},function(e){e[e.CHARACTER=0]="CHARACTER",e[e.MODIFIER=1]="MODIFIER",e[e.ACTION=2]="ACTION",e[e.EDIT=3]="EDIT",e[e.LAYOUTSWITCH=4]="LAYOUTSWITCH",e[e.INDIRECTINPUT=5]="INDIRECTINPUT"}(t=e.KeyType||(e.KeyType={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.STICKY=1]="STICKY",e[e.TOGGLE=2]="TOGGLE"}(e.KeyMode||(e.KeyMode={})),function(e){e[e.STANDARD=0]="STANDARD",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.NUMPAD=3]="NUMPAD"}(e.KeyLocation||(e.KeyLocation={})),function(e){e[e.NONE=0]="NONE",e[e.REPEAT=1]="REPEAT",e[e.ADDITIONALKEYS=2]="ADDITIONALKEYS",e[e.LOCK=3]="LOCK"}(e.LongpressAction||(e.LongpressAction={})),function(e){e[e.TEXTBOX=0]="TEXTBOX",e[e.ACCEPT=1]="ACCEPT",e[e.CANCEL=2]="CANCEL"}(e.IndirectInputComponent||(e.IndirectInputComponent={}))}(o=t.TcHmiKeyboard||(t.TcHmiKeyboard={}))}(t.Beckhoff||(t.Beckhoff={})),t.registerEx("TcHmiKeyboard","TcHmi.Controls.Beckhoff",e.Controls.Beckhoff.TcHmiKeyboard)}(e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={}));