var TcHmi,__extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){!function(e){!function(e){var i=function(e){function i(i,n,o){var r=e.call(this,i,n,o)||this;return r.__runtimeWidthNeededForHeight=!1,r.__runtimeHeightNeededForWidth=!1,r.__onResizedEventDestroyEvent=null,r.__animationFrameId=0,r.__loadHandler=function(e){!0===r.getIsEnabled()&&("Content"===r.getHeightMode()&&r.__processHeight(),"Content"===r.getWidthMode()&&r.__processWidth(),t.EventProvider.raise(r.__id+".onLoad",e),t.EventProvider.raise(r.__id+".onFunctionResultChanged",["getOriginalWidth","getOriginalHeight"]))},r.__errorHandler=function(e){!0===r.getIsEnabled()&&("Content"===r.getHeightMode()&&r.__processHeight(),"Content"===r.getWidthMode()&&r.__processWidth(),t.EventProvider.raise(r.__id+".onError",e),t.EventProvider.raise(r.__id+".onFunctionResultChanged",["getOriginalWidth","getOriginalHeight"]))},r}return __extends(i,e),i.prototype.__previnit=function(){if(this.__elementImage=this.__element[0].querySelector(".TcHmi_Controls_Beckhoff_TcHmiImage-template-content"),this.__elementImage||(this.__elementImage=this.__element[0].querySelector(".tchmi-image-template-content")),null===this.__elementImage)throw new Error("Invalid Template.html");e.prototype.__previnit.call(this)},i.prototype.__init=function(){e.prototype.__init.call(this);var t={passive:!0,capture:!1};this.__elementImage.addEventListener("load",this.__loadHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&t),this.__elementImage.addEventListener("error",this.__errorHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&t)},i.prototype.__attach=function(){e.prototype.__attach.call(this)},i.prototype.__detach=function(){e.prototype.__detach.call(this),null!==this.__onResizedEventDestroyEvent&&(this.__onResizedEventDestroyEvent(),this.__onResizedEventDestroyEvent=null)},i.prototype.destroy=function(){if(!this.__keepAlive){var t={passive:!0,capture:!1};this.__elementImage.removeEventListener("load",this.__loadHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&t),this.__elementImage.removeEventListener("error",this.__errorHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&t),e.prototype.destroy.call(this)}},i.prototype.__onResized=function(){var t=this;return function(e,i){!0===t.__runtimeHeightNeededForWidth?t.__processWidth():!0===t.__runtimeWidthNeededForHeight&&t.__processHeight()}},i.prototype.__processWidth=function(){if("Content"===this.getWidthMode()){var i="",n=this.__getContentWidth();null!==n&&(i=n+"px"),t.StyleProvider.setSimpleElementStyle(this.__element,"width",i)}e.prototype.__processWidth.call(this),"Content"===this.getHeightMode()&&"Content"!==this.getWidthMode()&&this.__processHeight()},i.prototype.__processHeight=function(){if("Content"===this.getHeightMode()){this.__intHeight=null;var t=this.__getContentHeight();null!==t&&(this.__intHeight=t+"px")}e.prototype.__processHeight.call(this),"Content"===this.getWidthMode()&&"Content"!==this.getHeightMode()&&this.__processWidth()},i.prototype.setWidthMode=function(valueNew){var e=t.ValueConverter.toSizeModeWithContent(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("WidthMode")),e!==this.__widthMode&&(this.__widthMode=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getWidthMode"]),this.__processWidthMode(),"Content"===e&&"Content"===this.getHeightMode()&&this.__processHeightMode())},i.prototype.setHeightMode=function(valueNew){var e=t.ValueConverter.toSizeModeWithContent(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("HeightMode")),e!==this.__heightMode&&(this.__heightMode=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getHeightMode"]),this.__processHeightMode(),"Content"===e&&"Content"===this.getHeightMode()&&this.__processWidthMode())},i.prototype.__getContentWidth=function(){this.__runtimeHeightNeededForWidth=!1;if("Content"!==this.getWidthMode())return e.prototype.__getContentWidth.call(this);if(!this.__src)return null;if("px"!==this.__widthUnit)return null;var i=this.__elementImage;return 0===i.naturalHeight||0===i.naturalWidth?null:"Content"===this.getHeightMode()?i.naturalWidth:null!==this.__height&&void 0!==this.__height&&"Value"===this.getHeightMode()?this.__height*i.naturalWidth/i.naturalHeight:(this.__runtimeHeightNeededForWidth=!0,null===this.__onResizedEventDestroyEvent&&(this.__onResizedEventDestroyEvent=t.EventProvider.register(this.__id+".onResized",this.__onResized())),!1===this.__isAttached?null:this.__element.height()*i.naturalWidth/i.naturalHeight)},i.prototype.__getContentHeight=function(){this.__runtimeWidthNeededForHeight=!1;if("Content"!==this.getHeightMode())return e.prototype.__getContentHeight.call(this);if(!this.__src)return null;if("px"!==this.__heightUnit)return null;var i=this.__elementImage;return 0===i.naturalHeight||0===i.naturalWidth?null:"Content"===this.getWidthMode()?i.naturalHeight:null!==this.__width&&void 0!==this.__width&&"Value"===this.getWidthMode()?this.__width*i.naturalHeight/i.naturalWidth:(this.__runtimeWidthNeededForHeight=!0,null===this.__onResizedEventDestroyEvent&&(this.__onResizedEventDestroyEvent=t.EventProvider.register(this.__id+".onResized",this.__onResized())),!1===this.__isAttached?null:this.__element.width()*i.naturalHeight/i.naturalWidth)},i.prototype.getOriginalWidth=function(){return this.__elementImage.naturalWidth},i.prototype.getOriginalHeight=function(){return this.__elementImage.naturalHeight},i.prototype.__processAccessConfig=function(){e.prototype.__processAccessConfig.call(this),this.__processSrc()},i.prototype.__processIsEnabled=function(){e.prototype.__processIsEnabled.call(this),this.__processSrc()},i.prototype.setSrc=function(valueNew){var e=t.ValueConverter.toString(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("Src")),e!==this.__src&&(this.__src=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getSrc"]),this.__processSrc())},i.prototype.getSrc=function(){return this.__src},i.prototype.__processSrc=function(){var e=this;0!==this.__animationFrameId&&(window.cancelAnimationFrame(this.__animationFrameId),this.__animationFrameId=0),this.__animationFrameId=window.requestAnimationFrame(function(){e.__animationFrameId=0,e.__src&&t.System.Services.accessManager.checkAccess(e,"observe")&&e.getIsEnabled()?e.__elementImage.src=e.__src:e.__elementImage.src=""})},i.prototype.setAlt=function(valueNew){var e=t.ValueConverter.toString(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("Alt")),e!==this.__alt&&(this.__alt=e,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getAlt"]),this.__processAlt())},i.prototype.getAlt=function(){return this.__alt},i.prototype.__processAlt=function(){this.__alt?this.__elementImage.alt=this.__alt:this.__elementImage.alt=""},i}(t.Controls.System.TcHmiControl);e.TcHmiImage=i}(e.Beckhoff||(e.Beckhoff={})),e.registerEx("TcHmiImage","TcHmi.Controls.Beckhoff",t.Controls.Beckhoff.TcHmiImage)}(t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));